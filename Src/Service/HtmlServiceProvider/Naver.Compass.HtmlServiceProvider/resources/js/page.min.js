"undefined"==typeof console&&(console={log:function(){},warn:function(){}});var protoNow={viewer:{viewerID:"#protoNowViewer",pageId:"#viewerPageContent",Frame:{},Contents:{}},action:{},widget:{Flicking:{}},util:{}};
protoNow.util={setCookie:function(e,t,r,o,n,i){var a=escape(e)+"="+escape(t);a+=r?"; EXPIRES="+r.toGMTString():"",a+=o?"; PATH="+o:"",a+=n?"; DOMAIN="+n:"",a+=i?"; SECURE":"",document.cookie=a},getCookie:function(e){var t=null;if(document.cookie){var r=document.cookie.split(escape(e)+"=");if(r.length>=2){var o=r[1].split(";");t=unescape(o[0])}}return t},initI18n:function(){i18n.init({getAsync:!1,debug:!1,useLocalStorage:!1,useCookie:!0,detectLngQS:"lang",resGetPath:"resources/locales/__lng__/__ns__.json",fallbackLng:["ko","en","zh","ja"]}).done(function(){$("[data-i18n]").i18n()})},getPageIdFromUrl:function(){var e=this.parseHash();return e.p},parseHash:function(){var e=(new URI).hash().replace("#","?"),t=new URI(e).search(!0);return _.extend({p:""},t)},getStartPage:function(e){var t=null;return e.startPage&&(t=this._searchPageNode(e.startPage,e.rootNodes)),_.isNull(t)&&(t=this._getFirstPageNode(e.rootNodes)),t},_searchPageNode:function(e,t){for(var r=0,o=t.length;r<o;r++){var n=t[r];if(n.url===e)return n;var i=n.children&&n.children.length>0;if(i){var a=protoNow.util._searchPageNode(e,n.children);if(a)return a}}return null},_getFirstPageNode:function(e){for(var t=0,r=e.length;t<r;t++){var o=e[t];if(o.url)return o;var n=o.children&&o.children.length>0;if(n){var i=protoNow.util._getFirstPageNode(o.children);if(i)return i}}return null},decodeEntities:function(e){return e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"):e},toNumber:function(e){var t=(e+"").replace("px","");return t=(t+"").replace("%",""),t=parseInt(t,10)||0},isOnScreen:function(e){var t=$(window),r={top:t.scrollTop(),left:t.scrollLeft()};r.right=r.left+t.width(),r.bottom=r.top+t.height();var o=e.offset();return o.right=o.left+e.outerWidth(),o.bottom=o.top+e.outerHeight(),!(r.right<o.left||r.left>o.right||r.bottom<o.top||r.top>o.bottom)},isElementVisible:function(e){var t=$(window).scrollTop(),r=t+$(window).height(),o=$(e).offset().top,n=o+$(e).height();return n<=r&&o>=t},runLazyImage:function(e){var t=$(protoNow.viewer.pageId+" img[data-src]"),r=t.length;if(0===r)return void(e&&e());var o=0,n=function(){r===o&&e&&e()};t.load(function(){o++,n()}).error(function(){o++,$(this).attr("src","resources/images/blank.png"),n()}),t.each(function(){var e=$(this).data("src");return!e||void $(this).attr("src",e)})},UUID:function(){return uuid.v4()}},$.isMobile=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(navigator.userAgent.toLowerCase());
!function(i){"use strict";"function"==typeof define&&define.amd?define(["../vendor/jquery"],i):"undefined"!=typeof exports?module.exports=i(require("jquery")):i(jQuery)}(function(i){"use strict";var e=window.Slick||{};e=function(){function e(e,o){var s,n,l,r=this;if(r.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:i(e),appendDots:i(e),arrows:!0,asNavFor:null,prevArrow:'<button type="button" data-role="none" class="slick-prev" aria-label="previous">Previous</button>',nextArrow:'<button type="button" data-role="none" class="slick-next" aria-label="next">Next</button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(i,e){return'<button type="button" data-role="none">'+(e+1)+"</button>"},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",mobileFirst:!1,pauseOnHover:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rtl:!1,slide:"",slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,variableWidth:!1,vertical:!1,waitForAnimate:!0},r.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,$list:null,touchObject:{},transformsEnabled:!1},i.extend(r,r.initials),r.activeBreakpoint=null,r.animType=null,r.animProp=null,r.breakpoints=[],r.breakpointSettings=[],r.cssTransitions=!1,r.hidden="hidden",r.paused=!1,r.positionProp=null,r.respondTo=null,r.shouldClick=!0,r.$slider=i(e),r.$slidesCache=null,r.transformType=null,r.transitionType=null,r.visibilityChange="visibilitychange",r.windowWidth=0,r.windowTimer=null,s=i(e).data("slick")||{},r.options=i.extend({},r.defaults,s,o),r.currentSlide=r.options.initialSlide,r.originalSettings=r.options,n=r.options.responsive||null,n&&n.length>-1){r.respondTo=r.options.respondTo||"window";for(l in n)n.hasOwnProperty(l)&&(r.breakpoints.push(n[l].breakpoint),r.breakpointSettings[n[l].breakpoint]=n[l].settings);r.breakpoints.sort(function(i,e){return r.options.mobileFirst===!0?i-e:e-i})}"undefined"!=typeof document.mozHidden?(r.hidden="mozHidden",r.visibilityChange="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(r.hidden="msHidden",r.visibilityChange="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(r.hidden="webkitHidden",r.visibilityChange="webkitvisibilitychange"),r.autoPlay=i.proxy(r.autoPlay,r),r.autoPlayClear=i.proxy(r.autoPlayClear,r),r.changeSlide=i.proxy(r.changeSlide,r),r.clickHandler=i.proxy(r.clickHandler,r),r.selectHandler=i.proxy(r.selectHandler,r),r.setPosition=i.proxy(r.setPosition,r),r.swipeHandler=i.proxy(r.swipeHandler,r),r.dragHandler=i.proxy(r.dragHandler,r),r.keyHandler=i.proxy(r.keyHandler,r),r.autoPlayIterator=i.proxy(r.autoPlayIterator,r),r.instanceUid=t++,r.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,r.init(),r.checkResponsive(!0)}var t=0;return e}(),e.prototype.addSlide=e.prototype.slickAdd=function(e,t,o){var s=this;if("boolean"==typeof t)o=t,t=null;else if(t<0||t>=s.slideCount)return!1;s.unload(),"number"==typeof t?0===t&&0===s.$slides.length?i(e).appendTo(s.$slideTrack):o?i(e).insertBefore(s.$slides.eq(t)):i(e).insertAfter(s.$slides.eq(t)):o===!0?i(e).prependTo(s.$slideTrack):i(e).appendTo(s.$slideTrack),s.$slides=s.$slideTrack.children(this.options.slide),s.$slideTrack.children(this.options.slide).detach(),s.$slideTrack.append(s.$slides),s.$slides.each(function(e,t){i(t).attr("data-slick-index",e)}),s.$slidesCache=s.$slides,s.reinit()},e.prototype.animateHeight=function(){var i=this;if(1===i.options.slidesToShow&&i.options.adaptiveHeight===!0&&i.options.vertical===!1){var e=i.$slides.eq(i.currentSlide).outerHeight(!0);i.$list.animate({height:e},i.options.speed)}},e.prototype.animateSlide=function(e,t){var o={},s=this;s.animateHeight(),s.options.rtl===!0&&s.options.vertical===!1&&(e=-e),s.transformsEnabled===!1?s.options.vertical===!1?s.$slideTrack.animate({left:e},s.options.speed,s.options.easing,t):s.$slideTrack.animate({top:e},s.options.speed,s.options.easing,t):s.cssTransitions===!1?(s.options.rtl===!0&&(s.currentLeft=-s.currentLeft),i({animStart:s.currentLeft}).animate({animStart:e},{duration:s.options.speed,easing:s.options.easing,step:function(i){i=Math.ceil(i),s.options.vertical===!1?(o[s.animType]="translate("+i+"px, 0px)",s.$slideTrack.css(o)):(o[s.animType]="translate(0px,"+i+"px)",s.$slideTrack.css(o))},complete:function(){t&&t.call()}})):(s.applyTransition(),e=Math.ceil(e),s.options.vertical===!1?o[s.animType]="translate3d("+e+"px, 0px, 0px)":o[s.animType]="translate3d(0px,"+e+"px, 0px)",s.$slideTrack.css(o),t&&setTimeout(function(){s.disableTransition(),t.call()},s.options.speed))},e.prototype.asNavFor=function(e){var t=this,o=null!==t.options.asNavFor?i(t.options.asNavFor).slick("getSlick"):null;null!==o&&o.slideHandler(e,!0)},e.prototype.applyTransition=function(i){var e=this,t={};e.options.fade===!1?t[e.transitionType]=e.transformType+" "+e.options.speed+"ms "+e.options.cssEase:t[e.transitionType]="opacity "+e.options.speed+"ms "+e.options.cssEase,e.options.fade===!1?e.$slideTrack.css(t):e.$slides.eq(i).css(t)},e.prototype.autoPlay=function(){var i=this;i.autoPlayTimer&&clearInterval(i.autoPlayTimer),i.slideCount>i.options.slidesToShow&&i.paused!==!0&&(i.autoPlayTimer=setInterval(i.autoPlayIterator,i.options.autoplaySpeed))},e.prototype.autoPlayClear=function(){var i=this;i.autoPlayTimer&&clearInterval(i.autoPlayTimer)},e.prototype.autoPlayIterator=function(){var i=this;i.options.infinite===!1?1===i.direction?(i.currentSlide+1===i.slideCount-1&&(i.direction=0),i.slideHandler(i.currentSlide+i.options.slidesToScroll)):(i.currentSlide-1===0&&(i.direction=1),i.slideHandler(i.currentSlide-i.options.slidesToScroll)):i.slideHandler(i.currentSlide+i.options.slidesToScroll)},e.prototype.buildArrows=function(){var e=this;e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow=i(e.options.prevArrow),e.$nextArrow=i(e.options.nextArrow),e.htmlExpr.test(e.options.prevArrow)&&e.$prevArrow.appendTo(e.options.appendArrows),e.htmlExpr.test(e.options.nextArrow)&&e.$nextArrow.appendTo(e.options.appendArrows),e.options.infinite!==!0&&e.$prevArrow.addClass("slick-disabled"))},e.prototype.buildDots=function(){var e,t,o=this;if(o.options.dots===!0&&o.slideCount>o.options.slidesToShow){for(t='<ul class="'+o.options.dotsClass+'">',e=0;e<=o.getDotCount();e+=1)t+="<li>"+o.options.customPaging.call(this,o,e)+"</li>";t+="</ul>",o.$dots=i(t).appendTo(o.options.appendDots),o.$dots.find("li").first().addClass("slick-active").attr("aria-hidden","false")}},e.prototype.buildOut=function(){var e=this;e.$slides=e.$slider.children(e.options.slide+":not(.slick-cloned)").addClass("slick-slide"),e.slideCount=e.$slides.length,e.$slides.each(function(e,t){i(t).attr("data-slick-index",e)}),e.$slidesCache=e.$slides,e.$slider.addClass("slick-slider"),e.$slideTrack=0===e.slideCount?i('<div class="slick-track"/>').appendTo(e.$slider):e.$slides.wrapAll('<div class="slick-track"/>').parent(),e.$list=e.$slideTrack.wrap('<div aria-live="polite" class="slick-list"/>').parent(),e.$slideTrack.css("opacity",0),e.options.centerMode!==!0&&e.options.swipeToSlide!==!0||(e.options.slidesToScroll=1),i("img[data-lazy]",e.$slider).not("[src]").addClass("slick-loading"),e.setupInfinite(),e.buildArrows(),e.buildDots(),e.updateDots(),e.options.accessibility===!0&&e.$list.prop("tabIndex",0),e.setSlideClasses("number"==typeof this.currentSlide?this.currentSlide:0),e.options.draggable===!0&&e.$list.addClass("draggable")},e.prototype.checkResponsive=function(e){var t,o,s,n=this,l=n.$slider.width(),r=window.innerWidth||i(window).width();if("window"===n.respondTo?s=r:"slider"===n.respondTo?s=l:"min"===n.respondTo&&(s=Math.min(r,l)),n.originalSettings.responsive&&n.originalSettings.responsive.length>-1&&null!==n.originalSettings.responsive){o=null;for(t in n.breakpoints)n.breakpoints.hasOwnProperty(t)&&(n.originalSettings.mobileFirst===!1?s<n.breakpoints[t]&&(o=n.breakpoints[t]):s>n.breakpoints[t]&&(o=n.breakpoints[t]));null!==o?null!==n.activeBreakpoint?o!==n.activeBreakpoint&&(n.activeBreakpoint=o,"unslick"===n.breakpointSettings[o]?n.unslick():(n.options=i.extend({},n.originalSettings,n.breakpointSettings[o]),e===!0&&(n.currentSlide=n.options.initialSlide),n.refresh())):(n.activeBreakpoint=o,"unslick"===n.breakpointSettings[o]?n.unslick():(n.options=i.extend({},n.originalSettings,n.breakpointSettings[o]),e===!0&&(n.currentSlide=n.options.initialSlide),n.refresh())):null!==n.activeBreakpoint&&(n.activeBreakpoint=null,n.options=n.originalSettings,e===!0&&(n.currentSlide=n.options.initialSlide),n.refresh())}},e.prototype.changeSlide=function(e,t){var o,s,n,l=this,r=i(e.target);switch(r.is("a")&&e.preventDefault(),n=l.slideCount%l.options.slidesToScroll!==0,o=n?0:(l.slideCount-l.currentSlide)%l.options.slidesToScroll,e.data.message){case"previous":s=0===o?l.options.slidesToScroll:l.options.slidesToShow-o,l.slideCount>l.options.slidesToShow&&l.slideHandler(l.currentSlide-s,!1,t);break;case"next":s=0===o?l.options.slidesToScroll:o,l.slideCount>l.options.slidesToShow&&l.slideHandler(l.currentSlide+s,!1,t);break;case"index":var d=0===e.data.index?0:e.data.index||i(e.target).parent().index()*l.options.slidesToScroll;l.slideHandler(l.checkNavigable(d),!1,t);break;default:return}},e.prototype.checkNavigable=function(i){var e,t,o=this;if(e=o.getNavigableIndexes(),t=0,i>e[e.length-1])i=e[e.length-1];else for(var s in e){if(i<e[s]){i=t;break}t=e[s]}return i},e.prototype.clickHandler=function(i){var e=this;e.shouldClick===!1&&(i.stopImmediatePropagation(),i.stopPropagation(),i.preventDefault())},e.prototype.destroy=function(){var e=this;e.autoPlayClear(),e.touchObject={},i(".slick-cloned",e.$slider).remove(),e.$dots&&e.$dots.remove(),e.$prevArrow&&"object"!=typeof e.options.prevArrow&&e.$prevArrow.remove(),e.$nextArrow&&"object"!=typeof e.options.nextArrow&&e.$nextArrow.remove(),e.$slides.removeClass("slick-slide slick-active slick-center slick-visible").attr("aria-hidden","true").removeAttr("data-slick-index").css({position:"",left:"",top:"",zIndex:"",opacity:"",width:""}),e.$slider.removeClass("slick-slider"),e.$slider.removeClass("slick-initialized"),e.$list.off(".slick"),i(window).off(".slick-"+e.instanceUid),i(document).off(".slick-"+e.instanceUid),e.$slider.html(e.$slides)},e.prototype.disableTransition=function(i){var e=this,t={};t[e.transitionType]="",e.options.fade===!1?e.$slideTrack.css(t):e.$slides.eq(i).css(t)},e.prototype.fadeSlide=function(i,e){var t=this;t.cssTransitions===!1?(t.$slides.eq(i).css({zIndex:1e3}),t.$slides.eq(i).animate({opacity:1},t.options.speed,t.options.easing,e)):(t.applyTransition(i),t.$slides.eq(i).css({opacity:1,zIndex:1e3}),e&&setTimeout(function(){t.disableTransition(i),e.call()},t.options.speed))},e.prototype.filterSlides=e.prototype.slickFilter=function(i){var e=this;null!==i&&(e.unload(),e.$slideTrack.children(this.options.slide).detach(),e.$slidesCache.filter(i).appendTo(e.$slideTrack),e.reinit())},e.prototype.getCurrent=e.prototype.slickCurrentSlide=function(){var i=this;return i.currentSlide},e.prototype.getDotCount=function(){var i=this,e=0,t=0,o=0;if(i.options.infinite===!0)o=Math.ceil(i.slideCount/i.options.slidesToScroll);else if(i.options.centerMode===!0)o=i.slideCount;else for(;e<i.slideCount;)++o,e=t+i.options.slidesToShow,t+=i.options.slidesToScroll<=i.options.slidesToShow?i.options.slidesToScroll:i.options.slidesToShow;return o-1},e.prototype.getLeft=function(i){var e,t,o,s=this,n=0;return s.slideOffset=0,t=s.$slides.first().outerHeight(),s.options.infinite===!0?(s.slideCount>s.options.slidesToShow&&(s.slideOffset=s.slideWidth*s.options.slidesToShow*-1,n=t*s.options.slidesToShow*-1),s.slideCount%s.options.slidesToScroll!==0&&i+s.options.slidesToScroll>s.slideCount&&s.slideCount>s.options.slidesToShow&&(i>s.slideCount?(s.slideOffset=(s.options.slidesToShow-(i-s.slideCount))*s.slideWidth*-1,n=(s.options.slidesToShow-(i-s.slideCount))*t*-1):(s.slideOffset=s.slideCount%s.options.slidesToScroll*s.slideWidth*-1,n=s.slideCount%s.options.slidesToScroll*t*-1))):i+s.options.slidesToShow>s.slideCount&&(s.slideOffset=(i+s.options.slidesToShow-s.slideCount)*s.slideWidth,n=(i+s.options.slidesToShow-s.slideCount)*t),s.slideCount<=s.options.slidesToShow&&(s.slideOffset=0,n=0),s.options.centerMode===!0&&s.options.infinite===!0?s.slideOffset+=s.slideWidth*Math.floor(s.options.slidesToShow/2)-s.slideWidth:s.options.centerMode===!0&&(s.slideOffset=0,s.slideOffset+=s.slideWidth*Math.floor(s.options.slidesToShow/2)),e=s.options.vertical===!1?i*s.slideWidth*-1+s.slideOffset:i*t*-1+n,s.options.variableWidth===!0&&(o=s.slideCount<=s.options.slidesToShow||s.options.infinite===!1?s.$slideTrack.children(".slick-slide").eq(i):s.$slideTrack.children(".slick-slide").eq(i+s.options.slidesToShow),e=o[0]?o[0].offsetLeft*-1:0,s.options.centerMode===!0&&(o=s.options.infinite===!1?s.$slideTrack.children(".slick-slide").eq(i):s.$slideTrack.children(".slick-slide").eq(i+s.options.slidesToShow+1),e=o[0]?o[0].offsetLeft*-1:0,e+=(s.$list.width()-o.outerWidth())/2)),e},e.prototype.getOption=e.prototype.slickGetOption=function(i){var e=this;return e.options[i]},e.prototype.getNavigableIndexes=function(){var i,e=this,t=0,o=0,s=[];for(e.options.infinite===!1?(i=e.slideCount-e.options.slidesToShow+1,e.options.centerMode===!0&&(i=e.slideCount)):(t=e.slideCount*-1,o=e.slideCount*-1,i=2*e.slideCount);t<i;)s.push(t),t=o+e.options.slidesToScroll,o+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;return s},e.prototype.getSlick=function(){return this},e.prototype.getSlideCount=function(){var e,t,o,s=this;return o=s.options.centerMode===!0?s.slideWidth*Math.floor(s.options.slidesToShow/2):0,s.options.swipeToSlide===!0?(s.$slideTrack.find(".slick-slide").each(function(e,n){if(n.offsetLeft-o+i(n).outerWidth()/2>s.swipeLeft*-1)return t=n,!1}),e=Math.abs(i(t).attr("data-slick-index")-s.currentSlide)||1):s.options.slidesToScroll},e.prototype.goTo=e.prototype.slickGoTo=function(i,e){var t=this;t.changeSlide({data:{message:"index",index:parseInt(i)}},e)},e.prototype.init=function(){var e=this;i(e.$slider).hasClass("slick-initialized")||(i(e.$slider).addClass("slick-initialized"),e.buildOut(),e.setProps(),e.startLoad(),e.loadSlider(),e.initializeEvents(),e.updateArrows(),e.updateDots()),e.$slider.trigger("init",[e])},e.prototype.initArrowEvents=function(){var i=this;i.options.arrows===!0&&i.slideCount>i.options.slidesToShow&&(i.$prevArrow.on("click.slick",{message:"previous"},i.changeSlide),i.$nextArrow.on("click.slick",{message:"next"},i.changeSlide))},e.prototype.initDotEvents=function(){var e=this;e.options.dots===!0&&e.slideCount>e.options.slidesToShow&&i("li",e.$dots).on("click.slick",{message:"index"},e.changeSlide),e.options.dots===!0&&e.options.pauseOnDotsHover===!0&&e.options.autoplay===!0&&i("li",e.$dots).on("mouseenter.slick",function(){e.paused=!0,e.autoPlayClear()}).on("mouseleave.slick",function(){e.paused=!1,e.autoPlay()})},e.prototype.initializeEvents=function(){var e=this;e.initArrowEvents(),e.initDotEvents(),e.$list.on("touchstart.slick mousedown.slick",{action:"start"},e.swipeHandler),e.$list.on("touchmove.slick mousemove.slick",{action:"move"},e.swipeHandler),e.$list.on("touchend.slick mouseup.slick",{action:"end"},e.swipeHandler),e.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},e.swipeHandler),e.$list.on("click.slick",e.clickHandler),e.options.autoplay===!0&&(i(document).on(e.visibilityChange,function(){e.visibility()}),e.options.pauseOnHover===!0&&(e.$list.on("mouseenter.slick",function(){e.paused=!0,e.autoPlayClear()}),e.$list.on("mouseleave.slick",function(){e.paused=!1,e.autoPlay()}))),e.options.accessibility===!0&&e.$list.on("keydown.slick",e.keyHandler),e.options.focusOnSelect===!0&&i(e.$slideTrack).children().on("click.slick",e.selectHandler),i(window).on("orientationchange.slick.slick-"+e.instanceUid,function(){e.checkResponsive(),e.setPosition()}),i(window).on("resize.slick.slick-"+e.instanceUid,function(){i(window).width()!==e.windowWidth&&(clearTimeout(e.windowDelay),e.windowDelay=window.setTimeout(function(){e.windowWidth=i(window).width(),e.checkResponsive(),e.setPosition()},50))}),i("*[draggable!=true]",e.$slideTrack).on("dragstart",function(i){i.preventDefault()}),i(window).on("load.slick.slick-"+e.instanceUid,e.setPosition),i(document).on("ready.slick.slick-"+e.instanceUid,e.setPosition)},e.prototype.initUI=function(){var i=this;i.options.arrows===!0&&i.slideCount>i.options.slidesToShow&&(i.$prevArrow.show(),i.$nextArrow.show()),i.options.dots===!0&&i.slideCount>i.options.slidesToShow&&i.$dots.show(),i.options.autoplay===!0&&i.autoPlay()},e.prototype.keyHandler=function(i){var e=this;37===i.keyCode&&e.options.accessibility===!0?e.changeSlide({data:{message:"previous"}}):39===i.keyCode&&e.options.accessibility===!0&&e.changeSlide({data:{message:"next"}})},e.prototype.lazyLoad=function(){function e(e){i("img[data-lazy]",e).each(function(){var e=i(this),t=i(this).attr("data-lazy");e.load(function(){e.animate({opacity:1},200)}).css({opacity:0}).attr("src",t).removeAttr("data-lazy").removeClass("slick-loading")})}var t,o,s,n,l=this;l.options.centerMode===!0?l.options.infinite===!0?(s=l.currentSlide+(l.options.slidesToShow/2+1),n=s+l.options.slidesToShow+2):(s=Math.max(0,l.currentSlide-(l.options.slidesToShow/2+1)),n=2+(l.options.slidesToShow/2+1)+l.currentSlide):(s=l.options.infinite?l.options.slidesToShow+l.currentSlide:l.currentSlide,n=s+l.options.slidesToShow,l.options.fade===!0&&(s>0&&s--,n<=l.slideCount&&n++)),t=l.$slider.find(".slick-slide").slice(s,n),e(t),l.slideCount<=l.options.slidesToShow?(o=l.$slider.find(".slick-slide"),e(o)):l.currentSlide>=l.slideCount-l.options.slidesToShow?(o=l.$slider.find(".slick-cloned").slice(0,l.options.slidesToShow),e(o)):0===l.currentSlide&&(o=l.$slider.find(".slick-cloned").slice(l.options.slidesToShow*-1),e(o))},e.prototype.loadSlider=function(){var i=this;i.setPosition(),i.$slideTrack.css({opacity:1}),i.$slider.removeClass("slick-loading"),i.initUI(),"progressive"===i.options.lazyLoad&&i.progressiveLazyLoad()},e.prototype.next=e.prototype.slickNext=function(){var i=this;i.changeSlide({data:{message:"next"}})},e.prototype.pause=e.prototype.slickPause=function(){var i=this;i.autoPlayClear(),i.paused=!0},e.prototype.play=e.prototype.slickPlay=function(){var i=this;i.paused=!1,i.autoPlay()},e.prototype.postSlide=function(i){var e=this;e.$slider.trigger("afterChange",[e,i]),e.animating=!1,e.setPosition(),e.swipeLeft=null,e.options.autoplay===!0&&e.paused===!1&&e.autoPlay()},e.prototype.prev=e.prototype.slickPrev=function(){var i=this;i.changeSlide({data:{message:"previous"}})},e.prototype.progressiveLazyLoad=function(){var e,t,o=this;e=i("img[data-lazy]",o.$slider).length,e>0&&(t=i("img[data-lazy]",o.$slider).first(),t.attr("src",t.attr("data-lazy")).removeClass("slick-loading").load(function(){t.removeAttr("data-lazy"),o.progressiveLazyLoad(),o.options.adaptiveHeight===!0&&o.setPosition()}).error(function(){t.removeAttr("data-lazy"),o.progressiveLazyLoad()}))},e.prototype.refresh=function(){var e=this,t=e.currentSlide;e.destroy(),i.extend(e,e.initials),e.init(),e.changeSlide({data:{message:"index",index:t}},!0)},e.prototype.reinit=function(){var e=this;e.$slides=e.$slideTrack.children(e.options.slide).addClass("slick-slide"),e.slideCount=e.$slides.length,e.currentSlide>=e.slideCount&&0!==e.currentSlide&&(e.currentSlide=e.currentSlide-e.options.slidesToScroll),e.slideCount<=e.options.slidesToShow&&(e.currentSlide=0),e.setProps(),e.setupInfinite(),e.buildArrows(),e.updateArrows(),e.initArrowEvents(),e.buildDots(),e.updateDots(),e.initDotEvents(),e.options.focusOnSelect===!0&&i(e.$slideTrack).children().on("click.slick",e.selectHandler),e.setSlideClasses(0),e.setPosition(),e.$slider.trigger("reInit",[e])},e.prototype.removeSlide=e.prototype.slickRemove=function(i,e,t){var o=this;return"boolean"==typeof i?(e=i,i=e===!0?0:o.slideCount-1):i=e===!0?--i:i,!(o.slideCount<1||i<0||i>o.slideCount-1)&&(o.unload(),t===!0?o.$slideTrack.children().remove():o.$slideTrack.children(this.options.slide).eq(i).remove(),o.$slides=o.$slideTrack.children(this.options.slide),o.$slideTrack.children(this.options.slide).detach(),o.$slideTrack.append(o.$slides),o.$slidesCache=o.$slides,void o.reinit())},e.prototype.setCSS=function(i){var e,t,o=this,s={};o.options.rtl===!0&&(i=-i),e="left"==o.positionProp?Math.ceil(i)+"px":"0px",t="top"==o.positionProp?Math.ceil(i)+"px":"0px",s[o.positionProp]=i,o.transformsEnabled===!1?o.$slideTrack.css(s):(s={},o.cssTransitions===!1?(s[o.animType]="translate("+e+", "+t+")",o.$slideTrack.css(s)):(s[o.animType]="translate3d("+e+", "+t+", 0px)",o.$slideTrack.css(s)))},e.prototype.setDimensions=function(){var i=this;if(i.options.vertical===!1?i.options.centerMode===!0&&i.$list.css({padding:"0px "+i.options.centerPadding}):(i.$list.height(i.$slides.first().outerHeight(!0)*i.options.slidesToShow),i.options.centerMode===!0&&i.$list.css({padding:i.options.centerPadding+" 0px"})),i.listWidth=i.$list.width(),i.listHeight=i.$list.height(),i.options.vertical===!1&&i.options.variableWidth===!1)i.slideWidth=Math.ceil(i.listWidth/i.options.slidesToShow),i.$slideTrack.width(Math.ceil(i.slideWidth*i.$slideTrack.children(".slick-slide").length));else if(i.options.variableWidth===!0){var e=0;i.slideWidth=Math.ceil(i.listWidth/i.options.slidesToShow),i.$slideTrack.children(".slick-slide").each(function(){e+=i.listWidth}),i.$slideTrack.width(Math.ceil(e)+1)}else i.slideWidth=Math.ceil(i.listWidth),i.$slideTrack.height(Math.ceil(i.$slides.first().outerHeight(!0)*i.$slideTrack.children(".slick-slide").length));var t=i.$slides.first().outerWidth(!0)-i.$slides.first().width();i.options.variableWidth===!1&&i.$slideTrack.children(".slick-slide").width(i.slideWidth-t)},e.prototype.setFade=function(){var e,t=this;t.$slides.each(function(o,s){e=t.slideWidth*o*-1,t.options.rtl===!0?i(s).css({position:"relative",right:e,top:0,zIndex:800,opacity:0}):i(s).css({position:"relative",left:e,top:0,zIndex:800,opacity:0})}),t.$slides.eq(t.currentSlide).css({zIndex:900,opacity:1})},e.prototype.setHeight=function(){var i=this;if(1===i.options.slidesToShow&&i.options.adaptiveHeight===!0&&i.options.vertical===!1){var e=i.$slides.eq(i.currentSlide).outerHeight(!0);i.$list.css("height",e)}},e.prototype.setOption=e.prototype.slickSetOption=function(i,e,t){var o=this;o.options[i]=e,t===!0&&(o.unload(),o.reinit())},e.prototype.setPosition=function(){var i=this;i.setDimensions(),i.setHeight(),i.options.fade===!1?i.setCSS(i.getLeft(i.currentSlide)):i.setFade(),i.$slider.trigger("setPosition",[i])},e.prototype.setProps=function(){var i=this,e=document.body.style;i.positionProp=i.options.vertical===!0?"top":"left","top"===i.positionProp?i.$slider.addClass("slick-vertical"):i.$slider.removeClass("slick-vertical"),void 0===e.WebkitTransition&&void 0===e.MozTransition&&void 0===e.msTransition||i.options.useCSS===!0&&(i.cssTransitions=!0),void 0!==e.OTransform&&(i.animType="OTransform",i.transformType="-o-transform",i.transitionType="OTransition",void 0===e.perspectiveProperty&&void 0===e.webkitPerspective&&(i.animType=!1)),void 0!==e.MozTransform&&(i.animType="MozTransform",i.transformType="-moz-transform",i.transitionType="MozTransition",void 0===e.perspectiveProperty&&void 0===e.MozPerspective&&(i.animType=!1)),void 0!==e.webkitTransform&&(i.animType="webkitTransform",i.transformType="-webkit-transform",i.transitionType="webkitTransition",void 0===e.perspectiveProperty&&void 0===e.webkitPerspective&&(i.animType=!1)),void 0!==e.msTransform&&(i.animType="msTransform",i.transformType="-ms-transform",i.transitionType="msTransition",void 0===e.msTransform&&(i.animType=!1)),void 0!==e.transform&&i.animType!==!1&&(i.animType="transform",i.transformType="transform",i.transitionType="transition"),i.transformsEnabled=null!==i.animType&&i.animType!==!1},e.prototype.setSlideClasses=function(i){var e,t,o,s,n=this;n.$slider.find(".slick-slide").removeClass("slick-active").attr("aria-hidden","true").removeClass("slick-center"),t=n.$slider.find(".slick-slide"),n.options.centerMode===!0?(e=Math.floor(n.options.slidesToShow/2),n.options.infinite===!0&&(i>=e&&i<=n.slideCount-1-e?n.$slides.slice(i-e,i+e+1).addClass("slick-active").attr("aria-hidden","false"):(o=n.options.slidesToShow+i,t.slice(o-e+1,o+e+2).addClass("slick-active").attr("aria-hidden","false")),0===i?t.eq(t.length-1-n.options.slidesToShow).addClass("slick-center"):i===n.slideCount-1&&t.eq(n.options.slidesToShow).addClass("slick-center")),n.$slides.eq(i).addClass("slick-center")):i>=0&&i<=n.slideCount-n.options.slidesToShow?n.$slides.slice(i,i+n.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"):t.length<=n.options.slidesToShow?t.addClass("slick-active").attr("aria-hidden","false"):(s=n.slideCount%n.options.slidesToShow,o=n.options.infinite===!0?n.options.slidesToShow+i:i,n.options.slidesToShow==n.options.slidesToScroll&&n.slideCount-i<n.options.slidesToShow?t.slice(o-(n.options.slidesToShow-s),o+s).addClass("slick-active").attr("aria-hidden","false"):t.slice(o,o+n.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false")),"ondemand"===n.options.lazyLoad&&n.lazyLoad()},e.prototype.setupInfinite=function(){var e,t,o,s=this;if(s.options.fade===!0&&(s.options.centerMode=!1),s.options.infinite===!0&&s.options.fade===!1&&(t=null,s.slideCount>s.options.slidesToShow)){for(o=s.options.centerMode===!0?s.options.slidesToShow+1:s.options.slidesToShow,e=s.slideCount;e>s.slideCount-o;e-=1)t=e-1,i(s.$slides[t]).clone(!0).attr("id","").attr("data-slick-index",t-s.slideCount).prependTo(s.$slideTrack).addClass("slick-cloned");for(e=0;e<o;e+=1)t=e,i(s.$slides[t]).clone(!0).attr("id","").attr("data-slick-index",t+s.slideCount).appendTo(s.$slideTrack).addClass("slick-cloned");s.$slideTrack.find(".slick-cloned").find("[id]").each(function(){})}},e.prototype.selectHandler=function(e){var t=this,o=parseInt(i(e.target).parents(".slick-slide").attr("data-slick-index"));return o||(o=0),t.slideCount<=t.options.slidesToShow?(t.$slider.find(".slick-slide").removeClass("slick-active").attr("aria-hidden","true"),t.$slides.eq(o).addClass("slick-active").attr("aria-hidden","false"),t.options.centerMode===!0&&(t.$slider.find(".slick-slide").removeClass("slick-center"),t.$slides.eq(o).addClass("slick-center")),void t.asNavFor(o)):void t.slideHandler(o)},e.prototype.slideHandler=function(i,e,t){var o,s,n,l,r=null,d=this;if(e=e||!1,(d.animating!==!0||d.options.waitForAnimate!==!0)&&!(d.options.fade===!0&&d.currentSlide===i||d.slideCount<=d.options.slidesToShow))return e===!1&&d.asNavFor(i),o=i,r=d.getLeft(o),l=d.getLeft(d.currentSlide),d.currentLeft=null===d.swipeLeft?l:d.swipeLeft,d.options.infinite===!1&&d.options.centerMode===!1&&(i<0||i>d.getDotCount()*d.options.slidesToScroll)?void(d.options.fade===!1&&(o=d.currentSlide,t!==!0?d.animateSlide(l,function(){d.postSlide(o)}):d.postSlide(o))):d.options.infinite===!1&&d.options.centerMode===!0&&(i<0||i>d.slideCount-d.options.slidesToScroll)?void(d.options.fade===!1&&(o=d.currentSlide,t!==!0?d.animateSlide(l,function(){d.postSlide(o)}):d.postSlide(o))):(d.options.autoplay===!0&&clearInterval(d.autoPlayTimer),s=o<0?d.slideCount%d.options.slidesToScroll!==0?d.slideCount-d.slideCount%d.options.slidesToScroll:d.slideCount+o:o>=d.slideCount?d.slideCount%d.options.slidesToScroll!==0?0:o-d.slideCount:o,d.animating=!0,d.$slider.trigger("beforeChange",[d,d.currentSlide,s]),n=d.currentSlide,d.currentSlide=s,d.setSlideClasses(d.currentSlide),d.updateDots(),d.updateArrows(),d.options.fade===!0?(t!==!0?d.fadeSlide(s,function(){d.postSlide(s)}):d.postSlide(s),void d.animateHeight()):void(t!==!0?d.animateSlide(r,function(){d.postSlide(s)}):d.postSlide(s)))},e.prototype.startLoad=function(){var i=this;i.options.arrows===!0&&i.slideCount>i.options.slidesToShow&&(i.$prevArrow.hide(),i.$nextArrow.hide()),i.options.dots===!0&&i.slideCount>i.options.slidesToShow&&i.$dots.hide(),i.$slider.addClass("slick-loading")},e.prototype.swipeDirection=function(){var i,e,t,o,s=this;return i=s.touchObject.startX-s.touchObject.curX,e=s.touchObject.startY-s.touchObject.curY,t=Math.atan2(e,i),o=Math.round(180*t/Math.PI),o<0&&(o=360-Math.abs(o)),o<=45&&o>=0?s.options.rtl===!1?"left":"right":o<=360&&o>=315?s.options.rtl===!1?"left":"right":o>=135&&o<=225?s.options.rtl===!1?"right":"left":"vertical"},e.prototype.swipeEnd=function(i){var e,t=this;if(t.dragging=!1,t.shouldClick=!(t.touchObject.swipeLength>10),void 0===t.touchObject.curX)return!1;if(t.touchObject.edgeHit===!0&&t.$slider.trigger("edge",[t,t.swipeDirection()]),t.touchObject.swipeLength>=t.touchObject.minSwipe)switch(t.swipeDirection()){case"left":e=t.options.swipeToSlide?t.checkNavigable(t.currentSlide+t.getSlideCount()):t.currentSlide+t.getSlideCount(),t.slideHandler(e),t.currentDirection=0,t.touchObject={},t.$slider.trigger("swipe",[t,"left"]);break;case"right":e=t.options.swipeToSlide?t.checkNavigable(t.currentSlide-t.getSlideCount()):t.currentSlide-t.getSlideCount(),t.slideHandler(e),t.currentDirection=1,t.touchObject={},t.$slider.trigger("swipe",[t,"right"])}else t.touchObject.startX!==t.touchObject.curX&&(t.slideHandler(t.currentSlide),t.touchObject={})},e.prototype.swipeHandler=function(i){var e=this;if(!(e.options.swipe===!1||"ontouchend"in document&&e.options.swipe===!1||e.options.draggable===!1&&i.type.indexOf("mouse")!==-1))switch(e.touchObject.fingerCount=i.originalEvent&&void 0!==i.originalEvent.touches?i.originalEvent.touches.length:1,e.touchObject.minSwipe=e.listWidth/e.options.touchThreshold,i.data.action){case"start":e.swipeStart(i);break;case"move":e.swipeMove(i);break;case"end":e.swipeEnd(i)}},e.prototype.swipeMove=function(i){var e,t,o,s,n,l=this;return n=void 0!==i.originalEvent?i.originalEvent.touches:null,!(!l.dragging||n&&1!==n.length)&&(e=l.getLeft(l.currentSlide),l.touchObject.curX=void 0!==n?n[0].pageX:i.clientX,l.touchObject.curY=void 0!==n?n[0].pageY:i.clientY,l.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(l.touchObject.curX-l.touchObject.startX,2))),t=l.swipeDirection(),"vertical"!==t?(void 0!==i.originalEvent&&l.touchObject.swipeLength>4&&i.preventDefault(),s=(l.options.rtl===!1?1:-1)*(l.touchObject.curX>l.touchObject.startX?1:-1),o=l.touchObject.swipeLength,l.touchObject.edgeHit=!1,l.options.infinite===!1&&(0===l.currentSlide&&"right"===t||l.currentSlide>=l.getDotCount()&&"left"===t)&&(o=l.touchObject.swipeLength*l.options.edgeFriction,l.touchObject.edgeHit=!0),l.options.vertical===!1?l.swipeLeft=e+o*s:l.swipeLeft=e+o*(l.$list.height()/l.listWidth)*s,l.options.fade!==!0&&l.options.touchMove!==!1&&(l.animating===!0?(l.swipeLeft=null,!1):void l.setCSS(l.swipeLeft))):void 0)},e.prototype.swipeStart=function(i){var e,t=this;return 1!==t.touchObject.fingerCount||t.slideCount<=t.options.slidesToShow?(t.touchObject={},!1):(void 0!==i.originalEvent&&void 0!==i.originalEvent.touches&&(e=i.originalEvent.touches[0]),t.touchObject.startX=t.touchObject.curX=void 0!==e?e.pageX:i.clientX,t.touchObject.startY=t.touchObject.curY=void 0!==e?e.pageY:i.clientY,void(t.dragging=!0))},e.prototype.unfilterSlides=e.prototype.slickUnfilter=function(){var i=this;null!==i.$slidesCache&&(i.unload(),i.$slideTrack.children(this.options.slide).detach(),i.$slidesCache.appendTo(i.$slideTrack),i.reinit())},e.prototype.unload=function(){var e=this;i(".slick-cloned",e.$slider).remove(),e.$dots&&e.$dots.remove(),e.$prevArrow&&"object"!=typeof e.options.prevArrow&&e.$prevArrow.remove(),e.$nextArrow&&"object"!=typeof e.options.nextArrow&&e.$nextArrow.remove(),e.$slides.removeClass("slick-slide slick-active slick-visible").attr("aria-hidden","true").css("width","")},e.prototype.unslick=function(){var i=this;
i.destroy()},e.prototype.updateArrows=function(){var i,e=this;i=Math.floor(e.options.slidesToShow/2),e.options.arrows===!0&&e.options.infinite!==!0&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.removeClass("slick-disabled"),e.$nextArrow.removeClass("slick-disabled"),0===e.currentSlide?(e.$prevArrow.addClass("slick-disabled"),e.$nextArrow.removeClass("slick-disabled")):e.currentSlide>=e.slideCount-e.options.slidesToShow&&e.options.centerMode===!1?(e.$nextArrow.addClass("slick-disabled"),e.$prevArrow.removeClass("slick-disabled")):e.currentSlide>=e.slideCount-1&&e.options.centerMode===!0&&(e.$nextArrow.addClass("slick-disabled"),e.$prevArrow.removeClass("slick-disabled")))},e.prototype.updateDots=function(){var i=this;null!==i.$dots&&(i.$dots.find("li").removeClass("slick-active").attr("aria-hidden","true"),i.$dots.find("li").eq(Math.floor(i.currentSlide/i.options.slidesToScroll)).addClass("slick-active").attr("aria-hidden","false"))},e.prototype.visibility=function(){var i=this;document[i.hidden]?(i.paused=!0,i.autoPlayClear()):(i.paused=!1,i.autoPlay())},i.fn.slick=function(){var i,t=this,o=arguments[0],s=Array.prototype.slice.call(arguments,1),n=t.length,l=0;for(l;l<n;l++)if("object"==typeof o||"undefined"==typeof o?t[l].slick=new e(t[l],o):i=t[l].slick[o].apply(t[l].slick,s),"undefined"!=typeof i)return i;return t},i(function(){i("[data-slick]").slick()})});
var ViewerModel=Backbone.Model.extend({defaults:{nCurrentPageIndex:-1,highlightActionWidget:!1},initialize:function(){this.set("highlightActionWidget",JSON.parse(protoNow.util.getCookie("highlightActionWidget"))),this.on("change:highlightActionWidget",function(){protoNow.util.setCookie("highlightActionWidget",this.get("highlightActionWidget"))})}}),Viewer=Backbone.View.extend({initialize:function(){this.model=new ViewerModel,this.initViewPort(),this.insertDataFile()},initViewPort:function(){$.urlParam=function(e){var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(window.location.href);return null==t?null:t[1]||0};var e=JSON.parse(decodeURI($.urlParam("viewport")));e&&$.isMobile&&this.changePageScale(e)},changePageScale:function(e){if(e.sValue){$(protoNow.viewer.pageId).css("zoom","");var t=e.sValue.scale,i=$(document).height();$(protoNow.viewer.pageId).css("transform-origin","0 0").css("transform","scale("+t+")"),this.emit("page.rendered",{scale:t,height:i})}},loadJS:function(e,t){$("#_page_data").remove();var i=document.createElement("script");i.setAttribute("id","_page_data"),i.async=!0,i.src=e,i.onreadystatechange=i.onload=function(){var e=i.readyState;t.done||e&&!/loaded|complete/.test(e)||(t.done=!0,t())},i.onerror=function(){console.log("Not found page data."),t(!1)},document.getElementsByTagName("head")[0].appendChild(i)},toggleHighlight:function(e){this.model.set("highlightActionWidget",e);var t=this.htPageData.widgets;return e===!1?void $(".link_highlight").removeClass("link_highlight fade_out"):(_.each(_.filter(t,this.isInteractiveWidget),function(e){$('[data-id="'+e.id+'"]').not(".ico_widget_note").addClass("link_highlight")}),void $(".link_highlight").delay(1e3).queue(function(e){$(this).addClass("fade_out"),e()}))},isInteractiveWidget:function(e){return"Flicking"===e.type||("HamburgerMenu"===e.type||!e.isDisabled&&(!!e.actions&&(!!e.actions.onClick&&!!e.actions.onClick.length)))},insertDataFile:function(){var e=protoNow.util.getPageIdFromUrl();this.loadJS("data/"+e+"/page_data.js",$.proxy(function(){this.trigger("pagedata:loaded")},this))},insertMasterDataFile:function(e){this.loadJS("data/"+e.masterPageID+"/page_data.js",$.proxy(function(){this.trigger("masterdata:loaded",e)},this))}});
$(document).ready(function(){$.isMobile?protoNow.oMobileViewer=new MobileViewer({$el:$(protoNow.viewer.viewerID),htDocumentData:htDocumentData}):protoNow.oPcViewer=new PcViewer});
protoNow.action.link={},protoNow.action.link.openLink=function(o,n){switch(n.target){case"openCurrentWindow":protoNow.action.link.openLinkCurrentWindow(n);break;case"openNewWindow":protoNow.action.link.openLinkNewWindow(n);break;case"openPopup":protoNow.action.link.openLinkPopup(n)}},protoNow.action.link.openLinkCurrentWindow=function(o){var n=!1;if(parent.window===window&&(n=!0),"http"===(o.url+"").substring(0,4))parent.top.location.href=o.url;else if(n)$.isMobile?window.location.href="m_viewer.html#p="+o.url:window.location.href="viewer.html#p="+o.url;else{var e={url:o.url};parent.window.postMessage(JSON.stringify(_.extend({id:"",message:"location.href"},e)),"*")}},protoNow.action.link.openLinkNewWindow=function(o){window.open(o.url,"_blank")},protoNow.action.link.openLinkPopup=function(o){var n=o.popup,e="left="+n.left+",top="+n.top+",width="+n.width+",height="+n.height+",toolbar="+(n.toolbar?"yes":"no")+",scrollbars="+(n.scrollbars?"yes":"no")+",location="+(n.location?"yes":"no")+",status="+(n.status?"yes":"no")+",menubar="+(n.menubar?"yes":"no")+",directories="+(n.directories?"yes":"no")+",resizable="+(n.resizable?"yes":"no")+",centerwindow="+(n.centerwindow?"yes":"no");window.open(o.url,o.url,e)},protoNow.action.link.closeWindow=function(){var o={message:"protoNow.close.window"};parent.window.postMessage(JSON.stringify(o),"*")};
protoNow.action.widget={set:function(e){for(var i=e.objectList,t=0,o=i.length;t<o;t++){var a=$("#div_"+i[t].id);switch(i[t].type){case"Show":protoNow.action.widget.show(a,i[t]);break;case"Hide":protoNow.action.widget.hide(a,i[t]);break;case"Toggle":protoNow.action.widget.toggle(a,i[t]);break;case"Move":protoNow.action.widget.move(a,i[t])}}},show:function(e,i){var t=i.animateTime||500;switch(i.animateType){case"None":e.show();break;case"Fade":e.fadeIn(t);break;case"SlideRight":e.show("slide",{direction:"left"},t);break;case"SlideLeft":e.show("slide",{direction:"right"},t);break;case"SlideUp":e.show("slide",{direction:"down"},t);break;case"SlideDown":e.show("slide",{direction:"up"},t)}protoNow.action.widget.animateToast(e,i)},hide:function(e,i,t){var o=i.animateTime||500;switch(i.animateType){case"None":e.hide();break;case"Fade":e.fadeOut(o);break;case"SlideRight":e.hide("slide",{direction:t?"left":"right"},o);break;case"SlideLeft":e.hide("slide",{direction:t?"right":"left"},o);break;case"SlideUp":e.hide("slide",{direction:t?"down":"up"},o);break;case"SlideDown":e.hide("slide",{direction:t?"up":"down"},o)}},toggle:function(e,i){e.is(":visible")?protoNow.action.widget.hide(e,i,!0):protoNow.action.widget.show(e,i)},animateToast:function(e,i){for(var t=i.id,o=0,a=page_data.widgets.length;o<a;o++)t===page_data.widgets[o].id&&protoNow.widget.Toast.prototype.setAnimate(page_data.widgets[o],e)}};
var CssGenerator={DEFAULT_MARGIN:16,PREFIX_REF:{Checkbox:"check",RadioButton:"radio",TextField:"input",TextArea:"textarea",Button:"input"},FIXED_WIDGET_PANEL:{},ZINDEX_OF_PARENT_PANEL:{},run:function(t){return this._initProperties(t),this._createPageStyles(),this},_initProperties:function(t){this.aWidgets=t.widgets||[],this.aGroups=t.groups||[],this.aAdaptiveView=_.clone(t.adaptiveView)||[];var e=this._createHashReferences(this.aGroups);this._aGroupHash=e.aGroupHash,this._aWidgetHash=e.aWidgetHash,this.FIXED_WIDGET_PANEL={},this.ZINDEX_OF_PARENT_PANEL={}},_createPageStyles:function(){this.aPageStyle=["<style data-style>"],this._insertGroups(this.aGroups),this._insertWidgets(this.aWidgets),this._insertAdaptiveViewStyles(),this.aPageStyle.push("</style>")},get:function(){return this.aPageStyle},appendTo:function(t){$("[data-style]").remove(),t.append(this.aPageStyle.join(""))},_insertGroups:function(t){_.each(t,$.proxy(function(t){if(t.style){var e="div_"+t.id,i=t.style,s=t.widgets,r=this._getParentGroupDisplay(t);this._insertStyle(e,{display:r,position:i.position,top:i.top,left:i.left,width:i.width,height:i.height,"z-index":i["z-index"]}),this._cacheGroupStyleAndFixedSubWidgetIds(i,s),this._insertAdaptiveViewByItem(t,$.proxy(function(i,r){r.display=this._getParentGroupDisplay(t,!0),i.aStyles.push(this.getStyle(e,this._setAbstractStyles(r))),this._cacheGroupStyleAndFixedSubWidgetIds(r,s,i.id)},this))}},this))},_cacheGroupStyleAndFixedSubWidgetIds:function(t,e,i){var s="fixed"==(t.position||"").toLowerCase(),r=i?"@"+i:"";_.each(e,$.proxy(function(e){this.ZINDEX_OF_PARENT_PANEL[e+r]=t["z-index"],s&&(this.FIXED_WIDGET_PANEL[e+r]=!0)},this))},_getParentGroupDisplay:function(t,e){var i="block";if(!t.style)return i;var s=t.style;s.display&&(i=s.display);var r=this._aGroupHash[t.id];if(r&&"PARENT"!==r){var n=this._getParentGroupStyle(r);if("none"===n.display&&(i="block"),e){if(!n.adaptiveViewStyles)return;if(!n.adaptiveViewStyles[0].display)return;"none"===n.adaptiveViewStyles[0].display&&(i="block")}}return i},_getParentGroupStyle:function(t){var e=null;return _.each(this.aGroups,$.proxy(function(i){i.id===t&&(e=i.style)})),e},_insertWidgets:function(t){_.each(t,$.proxy(function(t){var e=t.type,i=this._getContainGroup(t),s=this.prepareStyle(t,i);switch(this._cacheFixedWidgetsAndCheckZIndex(t),"HamburgerMenu"!==e&&(this._insertStyleWidgetContainer(t,s),this._insertStyleWidgetText(t,s)),e){case"DropList":case"ListBox":this._insertSelectStyle(t,s);break;case"RadioButton":case"Checkbox":this._insertRadioStyle(t,s,this.PREFIX_REF[e]||"");break;case"TextField":case"TextArea":case"Button":this._insertInputStyle(t,s,this.PREFIX_REF[e]||"");break;case"Flicking":this._insertFlickingStyle(t,s);break;case"HamburgerMenu":this._insertHamburgerStyle(t,s,i);break;case"Toast":this._insertToastStyle(t);break;case"Shape":this._insertShapeStyle(t,s);break;default:this._insertImageStyle(t,s)}},this))},_cacheFixedWidgetsAndCheckZIndex:function(t){var e=t.id,i=!!t.notes,s=t.style,r=this.ZINDEX_OF_PARENT_PANEL[e],n="fixed"==(s.position||"").toLowerCase();i?(n&&(this.FIXED_WIDGET_PANEL[e]=!0),void 0==r&&(this.ZINDEX_OF_PARENT_PANEL[e]=s["z-index"])):(delete this.FIXED_WIDGET_PANEL[e],delete this.ZINDEX_OF_PARENT_PANEL[e])},_resolveUnit:function(t){return"%"===(t+"").substr(-1,1)?t:t?t+"px":"auto"},_insertAdaptiveViewStyles:function(){var t=_.filter(this.aAdaptiveView,{condition:"lessThan"});t=_.sortBy(t,function(t){return t.width}).reverse();var e=_.filter(this.aAdaptiveView,{condition:"greaterThan"});e=_.sortBy(e,function(t){return t.width}),_.each(t.concat(e),$.proxy(function(t){var e="lessThan"===t.condition?"max":"min";this.aPageStyle.push("@media only screen and ("+e+"-width: "+t.width+"px) {\n"),t.aStyles||(t.aStyles=[]),this.aPageStyle.push(t.aStyles.join("\n")),this.aPageStyle.push("}\n")},this))},_getContainGroup:function(t){var e=!1;return _.each(this.aGroups,$.proxy(function(i){_.each(i.widgets,function(s){t.id===s&&(e=i)})},this)),e},_getGroupBy:function(t){if(!t)return!1;var e=_.find(this.aGroups,function(e){return e.id===t});return e},_getAdaptiveViewBy:function(t){if(!t)return!1;var e=_.find(this.aAdaptiveView,function(e){return e.id===t});return e},_createHashReferences:function(t){for(var e,i={},s={},r=0,n=t.length;r<n;r++){for(var a=t[r],o=0,h=a.groups.length;o<h;o++)e=a.groups[o],i[e]=a.id;i[a.id]||(i[a.id]="PARENT");for(var o=0,l=a.widgets.length;o<l;o++)e=a.widgets[o],s[e]=a.id}return{aGroupHash:i,aWidgetHash:s}},_getGroupOffset:function(t,e){var i={left:0,top:0},s=t.id;if(!t)return i;for(;;){var r=this._getGroupBy(s);if(!r)break;if(e?(r=_.find(r.adaptiveViewStyles,function(t){return t.adaptiveViewID===e}),i.left+=this._toNumber(r.left),i.top+=this._toNumber(r.top)):(i.left+=this._toNumber(r.style.left),i.top+=this._toNumber(r.style.top)),s=this._aGroupHash[s],"PARENT"===s)break}return i},_toNumber:function(t){return protoNow.util.toNumber(t)},_isItemHasAction:function(t){var e=!1;return t.actions&&t.actions.onClick?(t.actions.onClick.length>0&&(e=!0),e):e},prepareStyle:function(t,e){var i=_.clone(t.style),s=this._getGroupOffset(e);i.left=this._toNumber(i.left)-this._toNumber(s.left)+"px",i.top=this._toNumber(i.top)-this._toNumber(s.top)+"px",this._isItemHasAction(t)&&(i.cursor="pointer");var r=this._aWidgetHash[t.id];if(r){i.position="absolute";var n=this._getParentGroupStyle(r);"none"===n.display&&(i.display="block")}return i},_insertImageStyle:function(t){},_insertFlickingStyle:function(t,e){this._setFlickingPanelStyle(t,e,this.aPageStyle),this._insertAdaptiveViewByItem(t,$.proxy(function(e,i){this._setFlickingPanelStyle(t,i,e.aStyles)},this)),_.each(t.panelWidgets,$.proxy(function(t){this._insertWidgets(t)},this))},_setFlickingPanelStyle:function(t,e,i){var s=this._toNumber(t.panelWidth)||100,r=this._toNumber(t.panelSpacing)||0,n=parseInt(t.panelCount,10),a=e.height,o=[],h=this._toNumber(e.width)/100*s;if("Scroll"===t.viewMode){var l=(h+r)*n;o.push("#div_"+t.id+" .scroll-container{width:"+l+"px}\n"),o.push("#div_"+t.id+" .scroll-ct{width:"+h+"px; height:"+a+"; margin-right:"+r+"px}\n")}else o.push("#div_"+t.id+" .slick-slide{width:"+h+"px; margin:0 "+r/2+"px}\n"),o.push("#div_"+t.id+" .slick-slide-content{width:"+h+"px}\n");$.merge(i,o)},_insertToastStyle:function(t){this._insertWidgets(t.toastWidgets)},_insertHamburgerStyle:function(t,e,i){var s="panel_"+t.id,r="btn_"+t.id,n="bg_"+t.id,a=this.prepareStyle(t.buttonWidget,i);this._insertStyle(r,a),this._insertStyle(s,e),this._insertAdaptiveViewByItem(t.buttonWidget,$.proxy(function(t,e){t.aStyles.push(this.getStyle(r,this._setAbstractStyles(e)))},this)),this._insertAdaptiveViewByItem(t,$.proxy(function(t,e){t.aStyles.push(this.getStyle(s,this._setAbstractStyles(e)))},this)),this._insertStyle(n,{"z-index":e["z-index"],"min-height":e.height}),this._insertWidgets(t.menuWidgets)},_insertSelectStyle:function(t,e){var i="sel_"+t.id;this._insertStyle(i,_.extend(e,{display:"inherit",position:"absolute",top:0,left:0,opacity:1}),t),this._insertAdaptiveViewByItem(t,$.proxy(function(t,e){e.display="inherit",e.position="absolute",e.top=0,e.left=0,e.opacity=1,t.aStyles.push(this.getStyle(i,this._setAbstractStyles(e)))},this))},_insertRadioStyle:function(t,e,i){var s=i+"_"+t.id,r="label_"+t.id;this._insertStyle(r,_.extend(e,{display:"inherit",position:"absolute",top:0,width:this._getLabelWidth(e.width),left:"right"===t.alignButton?0:this.DEFAULT_MARGIN+"px",opacity:1}),t),this._insertStyle(s,{display:"inherit",left:"right"===t.alignButton?e.width:0,opacity:1},t),this._insertAdaptiveViewByItem(t,$.proxy(function(e,i){var n=_.extend(i,{display:"inherit",position:"absolute",top:0,width:this._getLabelWidth(i.width),left:"right"===t.alignButton?0:this.DEFAULT_MARGIN+"px",opacity:1});e.aStyles.push(this.getStyle(r,this._setAbstractStyles(n)));var a={display:"inherit",left:"right"===t.alignButton?i.width:0,opacity:1};e.aStyles.push(this.getStyle(s,this._setAbstractStyles(a)))},this))},_getLabelWidth:function(t){return this._toNumber(t)-this.DEFAULT_MARGIN+"px"},_insertInputStyle:function(t,e,i){var s=i+"_"+t.id;this._insertStyle(s,_.extend(e,{display:"inherit",position:"absolute",left:0,top:0,"border-color":t.hideBorder?"transparent":"",opacity:1}),t),this._insertAdaptiveViewByItem(t,$.proxy(function(t,e){e.display="inherit",e.position="absolute",e.top=0,e.left=0,e.opacity=1,t.aStyles.push(this.getStyle(s,this._setAbstractStyles(e)))},this))},_insertAdaptiveViewByItem:function(t,e){if(t){var i,s,r=t.adaptiveViewStyles,n=t.id;_.each(r,$.proxy(function(r){i=this._getAdaptiveViewBy(r.adaptiveViewID),i&&(i.aStyles||(i.aStyles=[]),this._aWidgetHash[t.id]&&(r.position="absolute"),s=this._getGroupAdaptiveOffsetBy(t,r.adaptiveViewID),r.left=this._toNumber(r.left)-this._toNumber(s.left)+"px",r.top=this._toNumber(r.top)-this._toNumber(s.top)+"px",e(i,_.clone(r)),this._pushNoteStyleIntoPageStyle(n,i.id,i.aStyles))},this))}},_getGroupAdaptiveOffsetBy:function(t,e){var i=this._getContainGroup(t),s=_.find(i.adaptiveViewStyles,function(t){return t.adaptiveViewID===e});return this._getGroupOffset(i,s?s.adaptiveViewID:null)},_insertStyle:function(t,e){var i=t.replace(/^\w+_/,"");this.aPageStyle.push(this.getStyle(t,this._setAbstractStyles(e))),this._pushNoteStyleIntoPageStyle(i,null,this.aPageStyle)},_pushNoteStyleIntoPageStyle:function(t,e,i){var s=t+(e?"@"+e:""),r="#note_"+t+"{display:none;";void 0!=this.ZINDEX_OF_PARENT_PANEL[s]&&(this.FIXED_WIDGET_PANEL[s]&&(r+="position:fixed;",delete this.FIXED_WIDGET_PANEL[s]),r+="z-index:"+(this.ZINDEX_OF_PARENT_PANEL[s]+1)+";",r+="}",i.push(r),delete this.ZINDEX_OF_PARENT_PANEL[s])},getStyle:function(t,e){delete e.isPlaced,delete e.adaptiveViewID;var i=["#"+t+"{"];for(var s in e)null!==e[s]&&void 0!==e[s]&&i.push(s+":"+e[s]+";");return i.push("}\n"),i.join("")},_setAbstractStyles:function(t){var e={};for(var i in t)t[i]&&(e[i]=t[i]);return this._setRotate(e),e},_setRotate:function(t){var e=t.rotate;if(e){if("deg"===e||"0deg"===e);else{var i="rotate("+e+")";t["-webkit-transform"]=i,t["-ms-transform"]=i,t.transform=i}delete t.rotate}},_setTextRotate:function(t){var e=t.textrot,i={};if(e){if("deg"===e||"0deg"===e);else{var s="rotate("+e+")";i["-webkit-transform"]=s,i["-ms-transform"]=s,i.transform=s}return delete t.textrot,i}},_insertStyleWidgetContainer:function(t,e){var i=function(t){return{display:t.display,position:t.position,top:t.top,left:t.left,width:t.width,height:t.height,"z-index":t["z-index"],opacity:t.opacity,rotate:t.rotate,cursor:t.cursor}},s="div_"+t.id,r=this._setAbstractStyles(i(e));this._insertStyle(s,r),this._insertAdaptiveViewByItem(t,$.proxy(function(t,e){var r=this._setAbstractStyles(i(e));t.aStyles.push(this.getStyle(s,r))},this))},_insertStyleWidgetText:function(t,e){var i=this._setTextRotate,s=function(t){var e=i(t),s={"text-align":t["text-align"],"vertical-align":t["vertical-align"]};return _.extend(s,e)},r="div_"+t.id,n=this._setAbstractStyles(s(e));this._insertStyle(r+" .text",n),this._insertAdaptiveViewByItem(t,$.proxy(function(t,e){var i=this._setAbstractStyles(s(e));t.aStyles.push(this.getStyle(r,i))},this))},_insertShapeStyle:function(t,e){var i=t.id,s=t.shapeType,r=s+"_"+i;this._insertStyle(r,{"border-radius":e["border-radius"],fill:this._getShapeFillColor(i,e),stroke:this._getShapeStrokeColor(e),"stroke-width":this._getShapeStrokeWidth(e),"stroke-dasharray":this._getShapeStrokeType(e)},t),this._insertAdaptiveViewByItem(t,$.proxy(function(e,r){var n="svg_"+e.id+"_"+i,a=s+"_"+e.id+"_"+i,o=_.clone(r);delete o.width,delete o.height,delete o.textrot,delete o["border-radius"],o.display="block",o.fill=this._getShapeFillColor(i,r),o.stroke=this._getShapeStrokeColor(r),o["stroke-width"]=this._getShapeStrokeWidth(r),o["stroke-dasharray"]=this._getShapeStrokeType(r),e.aStyles.push(this.getStyle("svg_"+i,{display:"none"})),e.aStyles.push(this.getStyle(n,{display:"block"})),e.aStyles.push(this.getStyle(a,this._setAbstractStyles(o)));var h=this;_.each(t.adaptiveViewStyles,function(i){e.id!==i.adaptiveViewID&&e.aStyles.push(h.getStyle("svg_"+i.adaptiveViewID+"_"+t.id,{display:"none"}))})},this))},_getShapeFillColor:function(t,e){return e.fill&&e.fill.type?"linearGradient"===e.fill.type?"url(#grad_"+t+")":e.fill.color:"none"},_getShapeStrokeColor:function(t){return t.stroke&&t.stroke.type?t.stroke.color:"none"},_getShapeStrokeWidth:function(t){if(!t.stroke)return 0;if(!t.stroke.width)return 0;var e=2*protoNow.util.toNumber(t.stroke.width);return e},_getShapeStrokeType:function(t){if(!t.stroke)return"none";if(!t.stroke.type)return"none";var e=parseInt(t.stroke.type,10),i=2*parseInt(t.stroke.width,10);return 2===e?1*i:3===e?2*i:4===e?1*i+" "+3*i+" "+3*i+" "+1*i:"none"}};
var MasterHandler={refill:function(t,e,s){this.oMasterPage=t,this.htMasterData=e,this.htPageData=s,this._initialize()._hadleMasterItself()._handleMasterGroups()._handleMasterWidgets()._checkAllGroupsRefences()._checkAllWidgetsRefences()._clean()},flush:function(){this._checkedWidgetsHash={},this._checkedGroupsHash={}},MASTER_POSITION_TOP:0,MASTER_POSITION_LEFT:0,WIDGETS_OFFSET_TOP:null,WIDGETS_OFFSET_LEFT:null,WIDGETS_AVS_OFFSET_TOP:{},WIDGETS_AVS_OFFSET_LEFT:{},_oIdsHash:{},_oWidgetsHash:{},_oGroupsHash:{},_checkedWidgetsHash:{},_checkedGroupsHash:{},_initialize:function(){return this.MASTER_POSITION_TOP=protoNow.util.toNumber(this.oMasterPage.style.top),this.MASTER_POSITION_LEFT=protoNow.util.toNumber(this.oMasterPage.style.left),this},_hadleMasterItself:function(){return this._pushIntoGroupsOfPageData(this.oMasterPage)._updateCompId(this.oMasterPage),delete this.oMasterPage.masterPageID,this.oMasterPage.groups=[],this.oMasterPage.widgets=[],this},_handleMasterGroups:function(){var t=this;return _.each(this.htMasterData.groups,function(e){e=$.extend(!0,{},e),t._updateCompId(e)._oGroupsHash[e.id]=[],_.each(e.widgets,function(s){t._oWidgetsHash[s]=e.id}),e.parentGroupID||(e.parentGroupID=t.oMasterPage.id,t.oMasterPage.groups.push(e.id)),t._pushIntoGroupsOfPageData(e)}),this},_handleMasterWidgets:function(){var t=this;return _.each(this.htMasterData.widgets,function(e){var s,i=e.id;e=$.extend(!0,{},e),t._updateCompId(e)._updateWidgetOffset(("HamburgerMenu"==e.type?e.buttonWidget:e).style),_.each(e.adaptiveViewStyles,$.proxy(t._updateWidgetAVSOffset,t)),"Flicking"==e.type&&t._handleFlickingWidget(e),"HamburgerMenu"==e.type&&t._handleHamburgerMenu(e),"Toast"==e.type&&t._handleToastWidget(e),t._pushIntoWidgetsOfPageData(e),(s=t._oWidgetsHash[i])?t._oGroupsHash[s].push(e.id):t.oMasterPage.widgets.push(e.id)}),this},_handleFlickingWidget:function(t){var e=this;return _.each(t.panelWidgets,function(t){_.each(t,$.proxy(e._updateCompId,e))}),this},_handleHamburgerMenu:function(t){return _.each(t.menuWidgets,$.proxy(this._updateCompId,this)),this._updateCompId(t.buttonWidget)},_handleToastWidget:function(t){return _.each(t.toastWidgets,$.proxy(this._updateCompId,this)),this},_checkAllGroupsRefences:function(){var t,e,s,i=this;return _.each(this.htPageData.groups,function(a){1!=i._checkedGroupsHash[a.id]&&(t=a.id,e=a.parentGroupID,s=[],i._oGroupsHash[t]&&(a.widgets=i._oGroupsHash[t]),(e=a.parentGroupID)&&(e=i._oIdsHash[e])&&(a.parentGroupID=e),_.each(a.groups,function(t){i._oIdsHash[t]?s.push(i._oIdsHash[t]):s.push(t)}),a.groups=s,i._checkedGroupsHash[a.id]=!0)}),this},_checkAllWidgetsRefences:function(){var t=this;return _.each(this.htPageData.widgets,function(e){1!=t._checkedWidgetsHash[e.id]&&(e.rawid&&t._adjustOffset(e.style)._checkWidgetAdaptiveViewStyle(e),t._checkWidgetEvents(e),"Flicking"==e.type&&t._checkFlickingWidget(e),"HamburgerMenu"==e.type&&t._checkHamburgerMenu(e),"Toast"==e.type&&t._checkToastWidget(e),t._checkedWidgetsHash[e.id]=!0)}),this},_checkFlickingWidget:function(t){var e=this;return _.each(t.panelWidgets,function(t){_.each(t,$.proxy(e._checkWidgetEvents,e))}),this},_checkHamburgerMenu:function(t){var e=t.buttonWidget;return _.each(t.menuWidgets,$.proxy(this._checkWidgetEvents,this)),t.rawid&&this._adjustOffset(e.style)._checkWidgetAdaptiveViewStyle(e),this._checkWidgetEvents(e)},_checkToastWidget:function(t){return _.each(t.toastWidgets,$.proxy(this._checkWidgetEvents,this)),this},_checkWidgetAdaptiveViewStyle:function(t){return _.each(t.adaptiveViewStyles,$.proxy(this._adjustOffset,this)),this},_checkWidgetEvents:function(t){var e=this;return _.each(t.actions,function(t){_.each(t,function(t){_.each(t.objectList,function(t){t.id=e._oIdsHash[t.id]||t.id})})}),this},_clean:function(){return this._oIdsHash={},this._oWidgetsHash={},this._oGroupsHash={},this.MASTER_POSITION_TOP=0,this.MASTER_POSITION_LEFT=0,this.WIDGETS_OFFSET_TOP=null,this.WIDGETS_OFFSET_LEFT=null,this.WIDGETS_AVS_OFFSET_TOP={},this.WIDGETS_AVS_OFFSET_LEFT={},delete this.htPageData.masters,this},_pushIntoGroupsOfPageData:function(t){return this.htPageData.groups.push(t),this},_pushIntoWidgetsOfPageData:function(t){return this.htPageData.widgets.push(t),this},_updateCompId:function(t){return t.rawid=t.id,t.id=this._oIdsHash[t.id]=protoNow.util.UUID(),this},_adjustOffset:function(t){var e=t.adaptiveViewID,s=0,i=0;return e?(s=this.WIDGETS_AVS_OFFSET_TOP[e],i=this.WIDGETS_AVS_OFFSET_LEFT[e]):(s=this.WIDGETS_OFFSET_TOP,i=this.WIDGETS_OFFSET_LEFT),t.top=protoNow.util.toNumber(t.top)+this.MASTER_POSITION_TOP-s+"px",t.left=protoNow.util.toNumber(t.left)+this.MASTER_POSITION_LEFT-i+"px",this},_updateWidgetOffset:function(t){var e=protoNow.util.toNumber(t.top),s=protoNow.util.toNumber(t.left);return null==this.WIDGETS_OFFSET_TOP?(this.WIDGETS_OFFSET_TOP=e,this.WIDGETS_OFFSET_LEFT=s):(this.WIDGETS_OFFSET_TOP=Math.min(this.WIDGETS_OFFSET_TOP,e),this.WIDGETS_OFFSET_LEFT=Math.min(this.WIDGETS_OFFSET_LEFT,s)),this},_updateWidgetAVSOffset:function(t){var e=t.adaptiveViewID,s=this.WIDGETS_AVS_OFFSET_TOP[e],i=this.WIDGETS_AVS_OFFSET_LEFT[e],a=protoNow.util.toNumber(t.top),h=protoNow.util.toNumber(t.left);return void 0==s?(this.WIDGETS_AVS_OFFSET_TOP[e]=a,this.WIDGETS_AVS_OFFSET_LEFT[e]=h):(this.WIDGETS_AVS_OFFSET_TOP[e]=Math.min(s,a),this.WIDGETS_AVS_OFFSET_LEFT[e]=Math.min(i,h)),this}};
protoNow=protoNow||{},protoNow.render={init:function(e){return e.groups=e.groups||[],this._pageData=e,this._isAdaptiveView=this._isSetAdaptiveViews(e),this._htWidgetTable={},this.onResizeFunction=$.proxy(this.onResize,this),clearTimeout(this.nTimer),this.nTimer=setTimeout($.proxy(this._callRender,this),0),this},appendTo:function(e){return this.welViewerPageIframe=e,this},_callRender:function(){var e=this._pageData;CssGenerator.run(e).appendTo($("head")),this.createGroupReferences(e.groups),this.createGroups(e.groups,this.welViewerPageIframe),this.createWidgets(e.widgets,this.welViewerPageIframe),this._setSubWidgetInWidgetTable(e.widgets),protoNow.util.runLazyImage(this.cb),this.aImgLists=$(protoNow.viewer.pageId+" .widget img"),$(window).off("resize",this.onResizeFunction).on("resize",this.onResizeFunction).trigger("resize")},getTargetAdaptiveViewId:function(){var e=$(window).width(),t=null,i=0,r=_.sortBy(_.clone(this._pageData.adaptiveView),function(e){return e.width});return r.reverse(),_.each(r,function(r){r.width>=e&&"lessThan"===r.condition&&(t=r.id,i=r.width)}),t},_isSetAdaptiveViews:function(e){return!!e.adaptiveView&&!(e.adaptiveView.length<=0)},_getImageExtension:function(e){var t=e.imageType,i=e.type,r="png";return"SVG"===i&&(r="svg"),"HamburgerMenu"===i&&e.buttonWidget.imageType&&(r=e.buttonWidget.imageType),t&&(r=t),"."+r},_getImageSrc:function(e,t,i){var r="resources/images/blank.png",n="images/",a=this._htWidgetTable[t],s=a.type,o=this._getImageExtension(a),h=null,u=null;if(e){var d=_.filter(a.adaptiveViewStyles,function(t){return t.adaptiveViewID===e});if(0===d.length)return"";if(d[0].isPlaced===!1)return"";u=d[0]}else u=a.style;return"Image"===s||"SVG"===s?h=a.hash:"HamburgerMenu"===s?h=a.buttonWidget.hash:u&&(h=u.hash),h&&(r=n+h+o),r},onResize:function(){var e=null;this._isAdaptiveView===!0&&(e=this.getTargetAdaptiveViewId()),_.each(this.aImgLists,$.proxy(function(t){var i=$(t),r=this._getImageSrc(e,i.data("id"),i.attr("rawid"));""!==r&&i.attr("src",r)},this))},then:function(e){return this.cb=e,this},createGroupReferences:function(e){var t;this._aGroupHash={},this._aWidgetHash={};for(var i=0,r=e.length;i<r;i++){for(var n=e[i],a=0,s=n.groups.length;a<s;a++)t=n.groups[a],this._aGroupHash[t]=n.id;this._aGroupHash[n.id]||(this._aGroupHash[n.id]="PARENT");for(var a=0,o=n.widgets.length;a<o;a++)t=n.widgets[a],this._aWidgetHash[t]=n.id}},_createTree:function(e){var t={};_.each(e,function(e){t[e.id]={parentID:e.parentGroupID||null,children:[],data:e}}),_.each(t,function(e){null!==e.parentID&&t[e.parentID].children.push(e)});var i=_.filter(t,function(e){return null===e.parentID});return _.each(t,function(e){delete e.parentID}),i},_createGroupDom:function(e,t){var i=e.data,r=i.id;if($("#div_"+r).length>0)return void console.log("no such group");var n=$.tmpl("group",i),a=this._aGroupHash[r],s="PARENT"===a?t:$("#div_"+a);s.append(n);var o=e.children.length;if(o>0)for(var h=0;h<o;h++)this._createGroupDom(e.children[h],t)},createGroups:function(e,t){for(var i=this._createTree(e),r=0,n=i.length;r<n;r++)this._createGroupDom(i[r],t)},createWidgets:function(e,t){_.each(e,$.proxy(function(e){var i=e.id;this._htWidgetTable[i]=_.clone(e);var r=$("#div_"+this._aWidgetHash[i]);r.length>0?r.append(WidgetFactory.create(e)):t.append(WidgetFactory.create(e)),WidgetFactory.initComponent(e)},this))},_setSubWidgetInWidgetTable:function(e){_.each(e,$.proxy(function(e){_.each(e.menuWidgets||[],$.proxy(function(e){this._htWidgetTable[e.id]=_.clone(e)},this)),_.each(e.panelWidgets||[],$.proxy(function(e){_.each(e||[],$.proxy(function(e){this._htWidgetTable[e.id]=_.clone(e)},this))},this)),_.each(e.toastWidgets||[],$.proxy(function(e){this._htWidgetTable[e.id]=_.clone(e)},this))}),this)}};
$.template("widget_common",'<div id="div_${id}" data-id="${id}" class="widget widget_Common" title="${toolTip}"> <img id="img_${id}" data-id="${id}" rawid="${rawid}" class="background" data-src="images/{{if rawid}}${rawid}{{else}}${id}{{/if}}.png"><div id="text_${id}" class="text_wrap"><div class="text">{{html text}}</div></div></div>'),$.template("widget_image",'<div id="div_${id}" data-id="${id}" class="widget widget_Image" title="${toolTip}"> <img id="img_${id}" data-id="${id}" rawid="${rawid}" class="background" data-src="images/{{if rawid}}${rawid}{{else}}${id}{{/if}}.${imageType}"><div id="text_${id}" class="text_wrap"><div class="text">{{html text}}</div></div></div>'),$.template("widget_button",'<div id="div_${id}" data-id="${id}" class="widget widget_Button" title="${toolTip}"> <input id="input_${id}" type="submit" value="${text}" {{if isDisabled}}disabled{{/if}}></div>'),$.template("widget_hotspot",'<div id="div_${id}" data-id="${id}" class="widget widget_HotSpot" title="${toolTip}"> </div>'),$.template("widget_note_icon",'<div id="note_${id}" data-id="${id}" class="ico_widget_note"></div>'),$.template("winote",'<li id="widget_note_${id}" data-id="${id}" class="item_widget_note"><div class="widget_note_title">${sNoteTitle}</div><div class="widget_note_cont">${sNoteDesc}</div></li>'),$.template("widget_Swipe",'<div id="div_${id}" data-id="${id}" class="widget widget_Swipe" title="${toolTip}"> {{each panelHtmlJson}}<div><div class="slick-slide-content">{{html sWidgetHtml}}</div></div>{{/each}}</div>'),$.template("widget_Scroll",'<div id="div_${id}" data-id="${id}" class="widget widget_Scroll" title="${toolTip}">     <ul class="scroll-container">       {{each panelHtmlJson}}       <li class="scroll-ct">{{html sWidgetHtml}}</li>       {{/each}}    </ul></div>'),$.template("widget_hamburger",'<div id="bg_${id}" data-id="${id}" data-prevent class="hamburgerBackground">&nbsp</div><div id="panel_${id}" data-id="${id}" class="hamburgerMenu" style="display:none">   <div class="hamburgerMenuContent">{{html sMenuHtml}}</div></div><div id="btn_${id}" data-prevent data-id="${id}" class="widget widget_${type}" title="${toolTip}"><img id="img_${id}" data-id="${id}" rawid="${rawid}" class="background" data-src="images/{{if rawid}}${rawid}{{else}}${id}{{/if}}.${imageType}" style="left:0;top:0"></div>'),$.template("widget_listBox",'<div id="div_${id}" data-id="${id}" class="widget widget_listBox" title="${toolTip}">    <select id="sel_${id}" name="${id}" size="2" {{if allowMultiple}}multiple{{/if}} {{if isDisabled}}disabled{{/if}}>       {{each items}}       <option value="${textValue}" {{if isSelected}}selected{{/if}}>${textValue}</option>       {{/each}}   </select></div>'),$.template("widget_dropList",'<div id="div_${id}" data-id="${id}" class="widget widget_dropList" title="${toolTip}">    <select id="sel_${id}" {{if isDisabled}}disabled{{/if}}>   {{each items}}       <option value="${textValue}" {{if isSelected}}selected{{/if}}>${textValue}</option>   {{/each}}   </select></div>'),$.template("widget_radioButton",'<div id="div_${id}" data-id="${id}" class="widget widget_radioButton" title="${toolTip}"> <label id="label_${id}" for="radio_${id}"><div id="radioText">${text}</div></label><input type="radio" id="radio_${id}" name="${radioGroup}" value="radio" {{if isSelected}}checked{{/if}} {{if isDisabled}}disabled{{/if}}></div>'),$.template("widget_checkbox",'<div id="div_${id}" data-id="${id}" class="widget widget_checkbox" title="${toolTip}"> <label id="label_${id}" for="check_${id}"><div id="radioText">${text}</div></label><input type="checkbox" id="check_${id}" value="checkbox" {{if isSelected}}checked{{/if}} {{if isDisabled}}disabled{{/if}}></div>'),$.template("widget_textField",'<div id="div_${id}" data-id="${id}" class="widget widget_textField" title="${toolTip}"> <input id="input_${id}" type="${textFieldType}" value="${text}" title="${toolTip}" placeholder="${hintText}" maxlength="${maxLength}" {{if readOnly}}readonly{{/if}} {{if isDisabled}}disabled{{/if}}></div>'),$.template("widget_textArea",'<div id="div_${id}" data-id="${id}" class="widget widget_textArea" title="${toolTip}"> <textarea id="textarea_${id}" title="${toolTip}" placeholder="${hintText}" maxlength="${maxLength}" {{if readOnly}}readonly{{/if}} {{if isDisabled}}disabled{{/if}} >${text}</textarea></div>'),$.template("widget_toast",'<div id="div_${id}" data-id="${id}" class="widget widget_toast" title="${toolTip}"> {{html sToastHtml}}{{if exposureTime <= 0 && bTouchClose === false}}<button type="button" data-prevent class="btn_close _buttonCloseToast"><span class="blind">close</span></button>{{/if}}</div>'),$.template("group",'<div id="div_${id}" data-id="${id}" class="group"></div>'),$.template("widget_svg",'<div id="div_${id}" data-id="${id}" class="widget widget_svg" title="${toolTip}"> <img id="img_${id}" data-id="${id}" rawid="${rawid}" class="background" data-src="images/{{if rawid}}${rawid}{{else}}${id}{{/if}}.svg"><div id="text_${id}" class="text_wrap"><div class="text">{{html text}}</div></div></div>'),$.template("widget_shape",'<div id="div_${id}" data-id="${id}" data-shape-type="${shapeType}" class="widget widget_shape" title="${toolTip}"> {{tmpl "svgShape"}}{{each adaptiveItems}}{{tmpl($value) "svgAdaptiveShape"}} {{/each}}<div id="text_${id}" class="text_wrap"><div class="text_cont"><div class="text">{{html text}}</div></div></div></div>'),$.template("svgShape",'<svg xmlns="http://www.w3.org/2000/svg" version="1.1" id="svg_${id}" class="svg_shape" width="${width}" height="${height}" viewBox="0 0 ${width*2} ${height*2}"{{if shapeType === "Triangle" || shapeType === "Diamond"}}viewBox="0 0 ${width} ${height}" {{/if}} >{{if fillType == "linearGradient"}}{{tmpl "linearGradient"}}{{/if}}{{tmpl shapeType}}</svg>'),$.template("svgAdaptiveShape",'<svg xmlns="http://www.w3.org/2000/svg" version="1.1" id="svg_${adaptiveViewID}_${id}" class="svg_shape svg_adaptive_shape" width="${width}" height="${height}" viewBox="0 0 ${width*2} ${height*2}"{{if shapeType === "Triangle" || shapeType === "Diamond"}}viewBox="0 0 ${width} ${height}" {{/if}} >{{if fillType == "linearGradient"}}{{tmpl "linearGradient"}}{{/if}}{{tmpl shapeType}}</svg>'),$.template("Paragraph",'<rect id="${shapeType}_{{if adaptiveViewID}}${adaptiveViewID}_{{/if}}${id}" x="${x}" y="${y}" width="${shapeWidth}" height="${shapeHeight}">'),$.template("Rectangle",'<rect id="${shapeType}_{{if adaptiveViewID}}${adaptiveViewID}_{{/if}}${id}" x="${x}" y="${y}" width="${shapeWidth}" height="${shapeHeight}">'),$.template("RoundedRectangle",'<rect id="${shapeType}_{{if adaptiveViewID}}${adaptiveViewID}_{{/if}}${id}" x="${x}" y="${y}" rx="${rx}" ry="${ry}" width="${shapeWidth}" height="${shapeHeight}">'),$.template("Ellipse",'<ellipse id="${shapeType}_{{if adaptiveViewID}}${adaptiveViewID}_{{/if}}${id}" x="0" y="0" cx="${width}" cy="${height}" rx="${shapeWidth/2}" ry="${shapeHeight/2}">'),$.template("Triangle",'<polygon id="${shapeType}_{{if adaptiveViewID}}${adaptiveViewID}_{{/if}}${id}" x="0" y="0" points="${width},${strokeWidth} ${strokeWidth*2},${(height*2) - strokeWidth} ${shapeWidth},${(height*2) - strokeWidth}">'),$.template("Diamond",'<polygon id="${shapeType}_{{if adaptiveViewID}}${adaptiveViewID}_{{/if}}${id}" x="0" y="0" points="${width},${strokeWidth} ${shapeWidth},${height} ${width},${shapeHeight} ${strokeWidth*2},${height}">'),$.template("linearGradient",'<defs><linearGradient id="grad_${id}" x1="${gradientRotateX1}" x2="${gradientRotateX2}" y1="${gradientRotateY1}" y2="${gradientRotateY2}">   {{each gradientColors}}       <stop offset="${offset}" stop-color="${color}" stop-opacity="${opacity}" />   {{/each}}</linearGradient></defs>');
var WidgetFactory={init:function(){this._htWidgetData={}},create:function(t){var e=this._createWidget(t),i=$(e);return this.setWidgetEvents(i,t),this.setSubWidgetEvents(i,t),i},setEvent:function(t){var e=t.actions;if(e)for(var i in e)if(e.hasOwnProperty(i)){var o='.widget[data-id="'+t.id+'"], .group[data-id="'+t.id+'"]';switch(i){case"onClick":$(protoNow.viewer.pageId).on("click tap",o,$.proxy(this.onClick,this));break;case"onMouseEnter":$(protoNow.viewer.pageId).on("mouseover",o,$.proxy(this.onMouseEnter,this));break;case"onMouseOut":$(protoNow.viewer.pageId).on("mouseout",o,$.proxy(this.onMouseOut,this))}}},onClick:function(t){var e=t.currentTarget,i=this._htWidgetData[$(e).attr("data-id")];if(i.actions&&i.actions.onClick){var o=i.actions.onClick;if("tap"===t.type&&o.length>0)return void t.stopImmediatePropagation();for(var a=0,r=o.length;a<r;a++)this.loadEvent(e,o[a])}},onMouseEnter:function(t){for(var e=t.currentTarget,i=this._htWidgetData[$(e).attr("data-id")],o=i.actions.onMouseEnter,a=0,r=o.length;a<r;a++)this.loadEvent(e,o[a])},onMouseOut:function(t){for(var e=t.currentTarget,i=this._htWidgetData[$(e).attr("data-id")],o=i.actions.onMouseOut,a=0,r=o.length;a<r;a++)this.loadEvent(e,o[a])},loadEvent:function(t,e){switch(e.action){case"closeWindow":protoNow.action.link.closeWindow();break;case"openLink":protoNow.action.link.openLink(t,e);break;case"widget":protoNow.action.widget.set(e)}},setWidgetEvents:function(t,e){e.isDisabled||this.setEvent(e),this._htWidgetData[e.id]=e,$.isMobile||e.hasOwnProperty("notes")&&(this._htWidgetData[e.id].sNoteDesc=this.createNoteIcon(t,e))},setSubWidgetEvents:function(t,e){_.each(e.menuWidgets||[],$.proxy(function(e){this.setWidgetEvents(t,e)},this)),_.each(e.panelWidgets||[],$.proxy(function(e){_.each(e||[],$.proxy(function(e){this.setWidgetEvents(t,e)},this))},this)),_.each(e.toastWidgets||[],$.proxy(function(e){this.setWidgetEvents(t,e)},this))},createNoteIcon:function(t,e){var i=(e.style,$.tmpl("widget_note_icon",e)),o="";return e.notes.Description&&(o=e.notes.Description),i.get(0).pageData=e,i.get(0).pageData.sNoteDesc=o,i.get(0).welTarget=t,i.prependTo($(protoNow.viewer.pageId)),o},initComponent:function(t){var e=t.type;if(protoNow.widget[e])if("Flicking"===e){var i=t.viewMode;"Scroll"===i?new protoNow.widget.Scroll(t):new protoNow.widget.Swipe(t)}else new protoNow.widget[e](t)},makeWidgetHtmlOfSwipe:function(t){var e=t.panelWidgets;t.panelHtml=[],t.panelHtmlJson=[],_.each(e,$.proxy(function(e){var i="";_.each(e,$.proxy(function(t){i+=this._createWidget(t)[0].outerHTML}),this),t.panelHtml.push(i),t.panelHtmlJson.push({sWidgetHtml:i})}),this)},makeWidgetHtmlOfScroll:function(t){var e=t.panelWidgets;t.panelHtml=[],t.panelHtmlJson=[],_.each(e,$.proxy(function(e){var i="";_.each(e,$.proxy(function(t){i+=this._createWidget(t)[0].outerHTML}),this),t.panelHtml.push(i),t.panelHtmlJson.push({sWidgetHtml:i})}),this)},makeWidgetsHtmlOfHamburger:function(t){var e=t.menuWidgets;t.sMenuHtml="";for(var i=0,o=e.length;i<o;i++)t.sMenuHtml+=this._createWidget(e[i])[0].outerHTML;t.buttonWidget?t.imageType=t.buttonWidget.imageType:t.imageType="png"},makeWidgetsHtmlOfToast:function(t){var e=t.toastWidgets;t.sToastHtml="";for(var i=0,o=e.length;i<o;i++)t.sToastHtml+=this._createWidget(e[i])[0].outerHTML},_getImageExtension:function(t){var e=t.imageType;return e?void(t.imageType=e):"png"},_createWidget:function(t){var e=null;switch(t.type){case"Shape":e=this._createShapeWidget(t);break;case"Flicking":e=this._createFlickingWidget(t);break;case"HamburgerMenu":this.makeWidgetsHtmlOfHamburger(t),e=$.tmpl("widget_hamburger",t);break;case"Toast":this.makeWidgetsHtmlOfToast(t),e=$.tmpl("widget_toast",t);break;case"Button":e=$.tmpl("widget_button",t);break;case"ListBox":e=$.tmpl("widget_listBox",t);break;case"DropList":e=$.tmpl("widget_dropList",t);break;case"RadioButton":e=$.tmpl("widget_radioButton",t);break;case"Checkbox":e=$.tmpl("widget_checkbox",t);break;case"TextField":e=$.tmpl("widget_textField",t);break;case"TextArea":e=$.tmpl("widget_textArea",t);break;case"HotSpot":e=$.tmpl("widget_hotspot",t);break;case"SVG":e=$.tmpl("widget_svg",t);break;case"Image":e=$.tmpl("widget_image",t);break;default:e=$.tmpl("widget_common",t)}return e},_createFlickingWidget:function(t){var e=null,i=t.viewMode;return"Scroll"===i?(this.makeWidgetHtmlOfScroll(t),e=$.tmpl("widget_Scroll",t)):(this.makeWidgetHtmlOfSwipe(t),e=$.tmpl("widget_Swipe",t)),e},_createShapeWidget:function(t){var e=$.tmpl("widget_common",t),i="png";if(t.shapeFormat&&(i=t.shapeFormat),"png"===i)return e;var o=function(t){var e=t.fill.type,i={sFillType:e,aColor:[],htRotate:{x1:0,x2:1,y1:0,y2:0}};return"linearGradient"===e&&(i.aColor=t.fill.gradientColors,i.htRotate=a(t.fill.gradientRotate)),i},a=function(t){function e(t){var e=Math.floor(t/Math.PI*2)+2,i=(.5*e+.25)*Math.PI,o=Math.cos(Math.abs(i-t))*Math.sqrt(2),a=o*Math.cos(t),r=o*Math.sin(t);return{x1:a<0?1:0,y1:r<0?1:0,x2:a>=0?a:a+1,y2:r>=0?r:r+1}}function i(t){return t/180*Math.PI}var o=i(t-180),a=e(o);return{x1:a.x1,x2:a.x2,y1:a.y1,y2:a.y2}},r=function(t){return t.stroke.width?t.stroke.width:null},n=function(t){var e=protoNow.util.toNumber(r(t));return{x:0+e,y:0+e}},s=function(t){var e=d(t),i=protoNow.util.toNumber(r(t));return e.width=2*(e.width-i),e.height=2*(e.height-i),e},d=function(t){return{width:protoNow.util.toNumber(t.width),height:protoNow.util.toNumber(t.height)}},h=o(t.style),l=s(t.style),g=n(t.style),c=d(t.style),p=2*protoNow.util.toNumber(t.style["border-radius"]),u=protoNow.util.toNumber(r(t.style));if(_.extend(t,{fillType:h.sFillType,gradientColors:h.aColor,gradientRotateX1:h.htRotate.x1,gradientRotateX2:h.htRotate.x2,gradientRotateY1:h.htRotate.y1,gradientRotateY2:h.htRotate.y2,shapeWidth:l.width,shapeHeight:l.height,x:g.x,y:g.y,rx:p,ry:p,width:c.width,height:c.height,strokeWidth:u}),t.adaptiveViewStyles){var m=[];_.each(t.adaptiveViewStyles,function(e){var i=o(e),a=s(e),h=n(e),l=d(e),g=2*protoNow.util.toNumber(e["border-radius"]),c=protoNow.util.toNumber(r(e));_.extend(e,{id:t.id,shapeType:t.shapeType,fillType:i.sFillType,gradientColors:i.aColor,gradientRotateX1:i.htRotate.x1,gradientRotateX2:i.htRotate.x2,gradientRotateY1:i.htRotate.y1,gradientRotateY2:i.htRotate.y2,shapeWidth:a.width,shapeHeight:a.height,x:h.x,y:h.y,rx:g,ry:g,width:l.width,height:l.height,strokeWidth:c}),m.push(e)},this),_.extend(t,{adaptiveItems:m})}return e=$.tmpl("widget_shape",t)}};WidgetFactory.init();
var MobileSitemap=function(e){this.initialize.apply(this,arguments)};MobileSitemap.prototype={initialize:function(e){this.htDocumentData=e,this.generateSitemap(),this.setEvent(),this.setFirstNode()},_setViewerPage:function(e){var t=protoNow.util.parseHash();return t.p=e,"m_viewer.html#"+URI.buildQuery(t)},setEvent:function(){$(".sitemapTree").on("tap","li.sitemapNode",$.proxy(this.onClickNode,this))},setFirstNode:function(){var e=protoNow.util.getPageIdFromUrl(),t=this._setViewerPage(e);if(""===e){var i=this.getFirstPageNode(this.htDocumentData.sitemap.rootNodes);return void(i&&(document.title=i.pageName,this.navigate(t+i.url)))}this.navigate(t)},navigate:function(e){window.location.href=e?e:"about:blank"},getFirstPageNode:function(e){for(var t=0,i=e.length;t<i;t++){var a=e[t];if(a.url)return a;var n=a.children&&a.children.length>0;if(n){var s=this.getFirstPageNode(a.children);if(s)return s}}return null},onClickNode:function(e){var t=$(e.currentTarget).find("a"),i=t.data("nodeurl");i&&($(".sitemapHighlight").removeClass("sitemapHighlight"),t.parent().parent().addClass("sitemapHighlight"),$("head title").text(t.data("nodename")),this.navigate(this._setViewerPage(i)))},generateSitemap:function(){for(var e="<ul class='sitemapTree'>",t=this.htDocumentData.sitemap.rootNodes,i=0;i<t.length;i++)e+=this.generateNode(t[i],0);e+="</ul></div>",$("#siteMap").html(e)},generateNode:function(e,t){var i=e.children&&e.children.length>0,a=['<li class="sitemapNode sitemapLeafNode"><div class="sitemapPageLinkContainer">'],n=e.url?'" data-nodeurl="'+e.url+'"':' style="display:none"';if(a.push('<a class="sitemapPageLink" data-nodename="'+_.escape(e.pageName)+'"'+n+">"),a.push('<span class="ico_sitemap_page"></span><span class="sitemapPageName">'),a.push(protoNow.util.decodeEntities(e.pageName)),a.push("</span></a></div>"),i)for(var s=0,r=e.children.length;s<r;s++){var o=e.children[s];a.push(this.generateNode(o,t+1))}return a.push("</li>"),a.join("")}};
var MobileViewer=Viewer.extend({events:{"click #highlightInteractiveButton":"_onClickHighlightActionWidget","click #pageNoteButton":"_onClickNoteButton","click #sitemapButton":"toggleSiteMapTree","click .page_navi_area a":"_onClickPageNavButton","click #mainMenuButton":"_onClickMainMenuButton","click #_dimmed, .btn_panel_close":"_resetMenuPanel"},initialize:function(e){protoNow.oSitemap=new MobileSitemap(e.htDocumentData),$("._loading").show(),Viewer.prototype.initialize.apply(this,arguments),this._setProperties(e),this._initCookies(),this._setPageEvent(),this.on("pagedata:loaded",$.proxy(this._afterLoadDataFile,this)),this.on("masterdata:loaded",$.proxy(this._loadAndCopyMasterToPageData,this)),this.on("masterdata:completed",$.proxy(this._afterLoadMasterFiles,this))},_setProperties:function(e){this.bNavFlag=!0,this.bTreeFlag=!1,this.bsubMenuFlag=!1,this.htPageData={},this.fnInitScale=$.proxy(this.initScale,this),this.$el=e.$el,this.id="",this.welContainer=$(protoNow.viewer.pageId),this.welBtnHighlightWidget=$("#highlightInteractiveButton"),this._welSubMenuArea=$("#subMenuArea"),this._welSiteMapTreePanel=$("#sitemapTreePanel"),this.aMasters=[],this.htMastersCache={}},_onClickNoteButton:function(){this._bIsOpenNote?this._hideNote():this._showNote()},_showNote:function(){this._onDimmed(),$("#pageNotePanel").fadeIn(300),$("#pageNoteButton").addClass("on"),this._bIsOpenNote=!0},_hideNote:function(){this._offDimmed(),$("#pageNotePanel").fadeOut(300),$("#pageNoteButton").removeClass("on"),this._bIsOpenNote=!1},_initCookies:function(){this.model.get("highlightActionWidget")===!0&&this.welBtnHighlightWidget.addClass("on")},_setPageEvent:function(){FastClick.attach(document.body),$(window).on("hashchange",$.proxy(function(){$("._loading").show(),this.insertDataFile()},this));var e=protoNow.viewer.pageId;$(document).on("tap","#_dimmed, .btn_panel_close",$.proxy(this._resetMenuPanel,this)).on("touchmove","#_dimmed",$.proxy(function(e){e.preventDefault()},this)).on("tap",e+" input, "+e+" textarea, "+e+" select",$.proxy(function(e){e.stopImmediatePropagation()},this)).on("tap","body",$.proxy(this._onTabBody,this))},_hideSiteMapTree:function(){this._offDimmed(),this._welSiteMapTreePanel.fadeOut(300),this.bTreeFlag=!1},_showSiteMapTree:function(){this._onDimmed(),this._welSiteMapTreePanel.fadeIn(300),this.bTreeFlag=!0},toggleSiteMapTree:function(e){this.bTreeFlag?this._hideSiteMapTree():this._showSiteMapTree(),e.preventDefault()},_onTabBody:function(e){$(e.target).parents("[data-prevent]").length>0||$(e.target).is("[data-prevent]")||this.togglePageInterface()},togglePageInterface:function(){var e=$(".menu_panel");this.bNavFlag?(e.fadeIn(300),this.bNavFlag=!1):(e.fadeOut(300),this.bNavFlag=!0)},_onClickPageNavButton:function(e){e.preventDefault();var t=this.model.get("nCurrentPageIndex"),a="prev"===$(e.currentTarget).data("direction")?this.aTree[t-1]:this.aTree[t+1];if(a)return window.location.href="m_viewer.html#p="+a.url,!1},_onClickHighlightActionWidget:function(e){e.preventDefault(),this.welBtnHighlightWidget.toggleClass("on"),this.toggleHighlight(this.welBtnHighlightWidget.hasClass("on"))},createLinearTree:function(e){if(e)for(var t=0,a=e.length;t<a;t++)"Page"===e[t].type&&this.aTree.push({pageName:e[t].pageName,url:e[t].url}),e[t].children&&this.createLinearTree(e[t].children)},initScale:function(){var e=0,t=$(window).width();if(this.htPageData.adaptiveView)for(var a=this.aAdaptiveViewWidth,i=0,n=a.length;i<n;i++)if(t<=a[i]){e=a[i];break}0!==e?this.changePageScale(t/e):this.htDocumentData.mobileViewport&&this.changePageScale(t/parseInt(this.htDocumentData.mobileViewport.width,10))},changePageScale:function(e){e=e.toFixed(1),$(protoNow.viewer.pageId).css("zoom",""+e)},_initStage:function(){this.htPageData=window.page_data,this.htDocumentData=window.htDocumentData,this._createTreeHash(),this.model.set("nCurrentPageIndex",this._getEqByPageUrl(this.htPageData.pageID,this.aTree)),$(protoNow.viewer.pageId).remove(),$("#viewerPageContainer").append('<div id="viewerPageContent"></div>'),$(".sitemapHighlight").removeClass("sitemapHighlight"),this.welContainer=$(protoNow.viewer.pageId);var e=[];$.each(this.htPageData.adaptiveView||[],function(t,a){e.push(a.width)}),e=_.sortBy(e,function(e){return e}),this.aAdaptiveViewWidth=e,$(window).off("resize",this.fnInitScale).on("resize",this.fnInitScale),this.initScale(),this.changeNavigation()},_createTreeHash:function(){this.aTree=[],this.createLinearTree(htDocumentData.sitemap.rootNodes)},_getEqByPageUrl:function(e,t){return _.indexOf(_.pluck(t,"url"),e)},_afterLoadDataFile:function(e){return e===!1?(alert($.i18n.t("nav.nopage")),void $("._loading").hide()):(this.htPageData=window.page_data,void(this.htPageData&&(this.htPageData.masters=this.htPageData.masters||[],this.aMasters=[].concat(this.htPageData.masters),this._loadAndCopyMasterToPageData())))},_afterLoadMasterFiles:function(){MasterHandler.flush(),this._initStage(),protoNow.render.init(this.htPageData).appendTo(this.welContainer).then($.proxy(this._afterRender,this)),this.initViewPort()},_loadAndCopyMasterToPageData:function(e){if(window.master_data&&(this.htMastersCache[master_data.pageID]=master_data,MasterHandler.refill(e,master_data,page_data),master_data=null),this.aMasters.length){var e=this.aMasters.pop();(window.master_data=this.htMastersCache[e.masterPageID])?this.trigger("masterdata:loaded",e):this.insertMasterDataFile(e)}else this.trigger("masterdata:completed")},_afterRender:function(){this.toggleHighlight(this.welBtnHighlightWidget.hasClass("on")),$("._loading").hide()},changeNavigation:function(){var e=this.htPageData.pageName;$("head title").text(e),$("#currentPageTitle").text(e);var t=$('[data-nodeurl="'+this.htPageData.pageID+'"]').parent().parent();t.addClass("sitemapHighlight"),this._setPageNotes(this.htPageData.pageNotes),this.model.get("nCurrentPageIndex")-1<0?$('[data-direction="prev"]').removeClass("enabled").addClass("disabled"):$('[data-direction="prev"]').removeClass("disabled").addClass("enabled"),this.model.get("nCurrentPageIndex")>=this.aTree.length-1?$('[data-direction="next"]').removeClass("enabled").addClass("disabled"):$('[data-direction="next"]').removeClass("disabled").addClass("enabled")},_setPageNotes:function(e){e?$("#pageNotes").html(e):$("#pageNotes").html($.i18n.t("nav.nopage"))},_onClickMainMenuButton:function(){this.bsubMenuFlag?this._hideSubMenu():this._showSubMenu()},_hideSubMenu:function(){$("#mainMenuIcon").removeClass("close").addClass("main_menu"),this._welSubMenuArea.hide(),this.bsubMenuFlag=!1},_showSubMenu:function(){$("#mainMenuIcon").removeClass("main_menu").addClass("close"),this._welSubMenuArea.show(),this.bsubMenuFlag=!0},_resetMenuPanel:function(){this._hideSubMenu(),this._hideNote(),this._hideSiteMapTree(),this.bsubMenuFlag=!1},_onDimmed:function(){$("body").addClass("no_scrolling"),$("#_dimmed").show()},_offDimmed:function(){$("body").removeClass("no_scrolling"),$("#_dimmed").hide()}});
var PcViewer=Viewer.extend({initialize:function(){this.id="",this.htDocumentData=window.htDocumentData,this.welContainer=$(protoNow.viewer.pageId),this.htPageData={},this.aMasters=[],this.htMastersCache={},this.setPageEvent(),Viewer.prototype.initialize.apply(this,arguments),this._initId(),this.on("pagedata:loaded",$.proxy(this.afterLoadDataFile,this)),this.on("pagedata:loaded",$.proxy(this._setPageScale,this)),this.on("masterdata:loaded",$.proxy(this.loadAndCopyMasterToPageData,this)),this.on("masterdata:completed",$.proxy(this.afterLoadMasterFiles,this)),$(window).on("resize",$.proxy(function(){this.repositionNoteIcon()},this)).trigger("resize")},_initId:function(){parent.window!==window&&parent.$("iframe").each($.proxy(function(t,e){e.contentWindow===window&&(this.id=$(e).parents(".device_wrap").attr("data-cid"))},this))},_setPageScale:function(){parent.MultiViewer.isActivate()&&parent.$("iframe").each($.proxy(function(t,e){if(this.id===$(e).attr("data-cid")){var i=Math.ceil(100/parseInt($(e).attr("data-px-ratio"),10));this.welContainer.css("zoom",i+"%")}},this))},setPageEvent:function(){window.addEventListener?addEventListener("message",$.proxy(this.onMessage,this),!1):attachEvent("onmessage",$.proxy(this.onMessage,this)),$("body").on("click",$.proxy(this._onClickBody,this)),$(document).on("click",".ico_widget_note",$.proxy(this.onClickNoteDialog,this)).bind("scroll",function(t){var e=$(this);parent.childScrollHandler(t,e.scrollTop())}),$(window).on("hashchange",$.proxy(this.insertDataFile,this))},_onClickBody:function(t){parent.window!==window&&this.emit("page.event",{type:"click"})},onMessage:function(t){var e=JSON.parse(t.data);if(e&&e.sMessage)switch(e.sMessage){case"viewport.data":this.id=e.sValue.id,this.changePageScale(e);break;case"toolbar.footnotes":this.toggleNotes(e.sValue);break;case"toolbar.highlightActionWidget":this.toggleHighlight("on"===e.sValue);break;case"toolbar.highlightWidgetNotes":this.highlightWidgetNote(e.sValue);break;case"toolbar.pageWidgetNote":this.toggleNotes(e.sValue);break;case"toolbar.removeAllHighlightWidgetNote":this.removeHighlightWidgetNote()}},emit:function(t,e){parent.window.postMessage(JSON.stringify(_.extend({id:this.id,message:t},e)),"*")},getWidgetElementId:function(t){return"div_"+t},highlightWidgetNote:function(t){var e=$("#"+t);this.removeHighlightWidgetNote(),e.addClass("note_highlight"),this.highlightScroll(e)},highlightScroll:function(t){protoNow.util.isElementVisible(t)===!1&&$("html,body").animate({scrollTop:t.offset().top},300)},removeHighlightWidgetNote:function(){$(".note_highlight").removeClass("note_highlight")},toggleNotes:function(t){if(t)for(var e=$(".ico_widget_note"),i=0,a=e.length;i<a;i++){var o=$("#"+this.getWidgetElementId(e[i].id.substring(5)));o.is(":visible")&&e.eq(i).show()}else this.removeHighlightWidgetNote(),$(".ico_widget_note").hide()},afterLoadDataFile:function(){$(protoNow.viewer.pageId).remove(),$("body").append('<div id="'+protoNow.viewer.pageId.replace("#","")+'"><div id="note_dialog" title=""></div></div>'),this.welContainer=$(protoNow.viewer.pageId),this.htPageData=window.page_data,this.htPageData&&(this.htPageData.masters=this.htPageData.masters||[],this.aMasters=[].concat(this.htPageData.masters),this.loadAndCopyMasterToPageData())},afterLoadMasterFiles:function(){MasterHandler.flush(),protoNow.render.init(this.htPageData).appendTo(this.welContainer).then($.proxy(this.sendCompleteToParent,this)),this.initViewPort()},loadAndCopyMasterToPageData:function(t){if(window.master_data&&(this.htMastersCache[master_data.pageID]=master_data,MasterHandler.refill(t,master_data,page_data),master_data=null),this.aMasters.length){var t=this.aMasters.pop();(window.master_data=this.htMastersCache[t.masterPageID])?this.trigger("masterdata:loaded",t):this.insertMasterDataFile(t)}else this.trigger("masterdata:completed")},sendCompleteToParent:function(){parent.window!==window&&this.emit("page.load.complete",{widgets:this.htPageData.widgets,pageName:this.htPageData.pageName,pageID:this.htPageData.pageID,pageNotes:this.htPageData.pageNotes,pageHeight:$(document).height()})},repositionNoteIcon:function(){this.welContainer.find(".ico_widget_note").each(function(){var t,e,i,a=$(this);"fixed"==a.css("position")&&a.data("fixed")||(t=a.data("id"),e=$('.widget[data-id="'+t+'"]'),i=e.offset(),e.is(":visible")&&a.css({top:parseInt(i.top,10)-10,left:parseInt(i.left,10)+e.width()-10}).data("fixed","fixed"))})},onClickNoteDialog:function(t){var e="div_"+$(t.currentTarget).attr("data-id"),i=$("#"+e);i.hasClass("note_highlight")?(i.removeClass("note_highlight"),this.emit("page.widgetNoteEvent",{type:"click",target:$(t.currentTarget).attr("data-id"),action:"off"})):(this.highlightWidgetNote(e),this.emit("page.widgetNoteEvent",{type:"click",target:$(t.currentTarget).attr("data-id"),action:"on"}))}});
protoNow.widget.HamburgerMenu=function(t){this.initialize.apply(this,arguments)},protoNow.widget.HamburgerMenu.prototype={initialize:function(t){this._htData=t,this._cacheElement(),this._setEvent()},_cacheElement:function(){this.welMenu=$("#panel_"+this._htData.id),this.welBtn=$("#btn_"+this._htData.id),this.welBg=$("#bg_"+this._htData.id)},_setEvent:function(){$(protoNow.viewer.pageId).on("click","#btn_"+this._htData.id,$.proxy(this.showMenu,this)),$(window).resize($.proxy(this.onResize,this)),$(protoNow.viewer.pageId).on("click","#bg_"+this._htData.id,$.proxy(this.hideMenu,this))},onResize:function(){this.welBg.height($(document).height())},capitalize:function(t){return t[0].toUpperCase()+t.slice(1)},showMenu:function(t){if(this.welBg=$("#bg_"+this._htData.id),this.welMenu=$("#panel_"+this._htData.id),this.welMenu.is(":visible"))return!0;if(t.currentTarget.id!=="btn_"+this._htData.id)return!0;var i="transition.slide"+this.capitalize(this._htData.direction)+"In";this.welBtn.hide(),this.welMenu.css("overflow","hidden").show().children().velocity(i,{duration:500});var e=$(document).height();$(protoNow.viewer.pageId).css("zoom")&&(e/=$(protoNow.viewer.pageId).css("zoom")),this.welBg.height(e).velocity({opacity:"0.6"},{display:"block"},{duration:300})},hideMenu:function(t){if(t.currentTarget.id!=="bg_"+this._htData.id)return!0;this.welBtn.show();var i="transition.slide"+this.capitalize(this._htData.direction)+"Out";this.welMenu.css("overflow","hidden").children().velocity(i,{duration:500,complete:function(){$(this).parent().hide()}}),this.welBg.velocity({opacity:"0"},{display:"none"},{duration:300})}};
protoNow.widget.Scroll=function(l){this.initialize.apply(this,arguments)},protoNow.widget.Scroll.prototype={initialize:function(l){this.sId="div_"+l.id,this._setScroll()},_setScroll:function(){var l="#"+this.sId;this.oScroll=new IScroll(l,{scrollX:!0,scrollY:!1,mouseWheel:!0,scrollbars:!1})}};
protoNow.widget.Swipe=function(i){this.initialize.apply(this,arguments)},protoNow.widget.Swipe.prototype={initialize:function(i){var t="div_"+i.id;this.sId=t,this.wel=$("#"+t),this._htOptions=i,this._setSwipe()},_setSwipe:function(){$(this.wel).slick({arrows:!1,infinite:!0,lazyLoad:"progressive",slidesToShow:1,slidesToScroll:1,variableWidth:!0,centerPadding:0,centerMode:this._isCardViewMode(),speed:this._htOptions.durationTime||500,dots:this._htOptions.bUseNavigation,autoplay:this._htOptions.bAutomatic||3e3,autoplaySpeed:this._htOptions.automaticIntervalTime})},_isCardViewMode:function(){var i=this._htOptions.viewMode;return"Card"===i}};
protoNow.widget.Toast=function(t){this.initialize.apply(this,arguments)},protoNow.widget.Toast.prototype={_nFadeTime:500,initialize:function(t){var i="div_"+t.id;this._htWidgetData=t,this.wel=$("#"+i),this._setDisplayToast(t,this.wel),this._setEvent(),this.setAnimate(this._htWidgetData,this.wel)},_setDisplayToast:function(t,i){"block"===t.style.display&&(i.hide(),i.delay(300).fadeIn(this._nFadeTime))},_setEvent:function(){this.wel.on("click","._buttonCloseToast",$.proxy(this._closeWidget,this)),this.wel.on("click",$.proxy(this._onClickToastWidget,this))},setAnimate:function(t,i){var e=t.exposureTime;e>0&&i.delay(e).fadeOut()},_closeWidget:function(){return this.wel.hide(),this._hideParentPanel(),!1},_hideWidget:function(t){$(t).fadeOut(this._nFadeTime),this._hideParentPanel()},_onClickToastWidget:function(t){this._htWidgetData.bTouchClose===!0&&this._hideWidget(t.currentTarget)},_hideParentPanel:function(){return this.wel.siblings(":visible").length||this.wel.parent().hide(),this}};